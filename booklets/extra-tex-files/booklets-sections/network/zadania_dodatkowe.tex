% Copyright (c) 2017-2020 Matematyka dla Ciekawych Åšwiata (http://ciekawi.icm.edu.pl/)
% Copyright (c) 2017-2020 Robert Ryszard Paciorek <rrp@opcode.eu.org>
% 
% MIT License
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

\dbEntryBegin{skrypt_dostepnosc}\if1\dbEntryCheckResults
KorzystajÄ…c z standardowych narzÄ™dzi shellowych napisz skrypt ktÃ³ry sprawdzi dostÄ™pnoÅ›Ä‡ hosta \Verb#ciekawi.icm.edu.pl# i w przypadku jego niedostÄ™pnoÅ›ci wypisze \Verb#niedostÄ™pny#, a w przypadku dostÄ™pnoÅ›ci nie wypisze niczego.

\textit{Informacja: skrypty tego typu, uruchamiane automatycznie co pewien czas np. przy pomocy cron'a czÄ™sto sÄ… wykorzystywane do wysÅ‚ania powiadomieÅ„ o niedostÄ™pnoÅ›ci danej maszyny lub usÅ‚ugi lub podjÄ™cia automatycznie jakiÅ› dziaÅ‚aÅ„.}
\fi

\dbEntryBegin{mail_smtp}\if1\dbEntryCheckResults
KorzystajÄ…c bezpoÅ›rednio z poleceÅ„ protokoÅ‚u SMTP, programu \Verb#nc# (\Verb#netcat#) lub \Verb#telnet# i serwera \Verb#mail.opcode.eu.org# wyÅ›lij mail do \Verb#rrp@opcode.eu.org# w taki sposÃ³b aby:
\begin{itemize}
\item nadawca kopertowy byÅ‚ sfaÅ‚szowany (domena w ktÃ³rej znajduje siÄ™ jego adres powinna istnieÄ‡, np. uÅ¼yj \Verb#ciekawi.icm.edu.pl#)
\item nadawca i odbiorca nagÅ‚Ã³wkowy byÅ‚ sfaÅ‚szowany
\end{itemize}
MoÅ¼esz poszaleÄ‡ z adresami (zwÅ‚aszcza nagÅ‚Ã³wkowymi).
JeÅ¼eli nie popeÅ‚nisz bÅ‚Ä™du mail trafi do prowadzÄ…cych zajÄ™cia, zatem jeÅ¼eli oczekujesz weryfikacji wykonania zadania to podpisz siÄ™ w nim.
Nie pisz teÅ¼ niczego czego nie chciaÅ‚byÅ› aby TwÃ³j prowadzÄ…cy przeczytaÅ‚ {\Symbola ğŸ˜‰}.
\fi



\dbEntryBegin{rfc1924}\if1\dbEntryCheckResults
Zapoznaj siÄ™ z RFC1924 i napisz program konwertujÄ…cy adresy IPv6 pomiÄ™dzy notacjÄ… dwukropkowÄ… a notacjÄ… base-85 zgodnÄ… z tÄ… specyfikacjÄ….

\textit{WskazÃ³wka: do odczytu adresu w standardowej notacji dwukropkowej moÅ¼esz uÅ¼yÄ‡ narzÄ™dzi z moduÅ‚u \texttt{ipaddress}}
\fi

% PwES domowe (?):

\dbEntryBegin{czy_w_sieci_ipv4}\if1\dbEntryCheckResults
Ustal czy host o adresie IPv4 192.168.65.20 naleÅ¼y do sieci 192.168.33.15/19.
\fi

\dbEntryBegin{czy_w_sieci_ipv6}\if1\dbEntryCheckResults
Ustal czy host o adresie IPv6 2001:6a0:0:21::60:2 naleÅ¼y do sieci 2001:6a0:0:10::/58.
\fi


\dbEntryBegin{adresy_serwerow_dns}\if1\dbEntryCheckResults
Ustal adresy serwerÃ³w DNS posiadajÄ…cych informacjÄ™ o domenie \emph{gov}. Podaj polecenie ktÃ³rego uÅ¼yÅ‚eÅ›.
\fi

\dbEntryBegin{trasy_pakietow}\if1\dbEntryCheckResults
Polecenie \Verb#ip r# pokazaÅ‚o nastÄ™pujÄ… tablicÄ™ routingu:

\begin{Verbatim}
default via 192.168.29.2 dev eth0.2 
192.168.29.192/27 dev eth0.2  proto kernel  scope link  src 192.168.29.193
172.16.16.0/27 via 172.16.18.2 dev tun5 
172.16.16.48/28 dev wlan0  proto kernel  scope link  src 172.16.16.49 
172.16.18.0/30 dev tun5  proto kernel  scope link  src 172.16.18.1 
192.168.29.0/24 dev eth0  proto kernel  scope link  src 192.168.29.1 
\end{Verbatim}
Ustal trasÄ™ (urzÄ…dzenie ktÃ³rym zostanie wysÅ‚any pakiet oraz jeÅ¼eli jest potrzebny to adres routera do ktÃ³rego bÄ™dzie przesyÅ‚any) dla nastÄ™pujacych adresÃ³w IP:
\begin{itemize}
	\item 8.8.8.8
	\item 192.168.29.202
	\item 172.16.16.15
\end{itemize}
\fi

\dbEntryBegin{serwer_moj_ip}\if1\dbEntryCheckResults
Napisz serwer UDP lub TCP (okreÅ›l ktÃ³ry wariant wybraÅ‚eÅ›/wybraÅ‚aÅ›), ktÃ³ry na ciÄ…g znakÃ³w \texttt{ip} wysÅ‚any przez klienta odeÅ›le do niego informacjÄ™ o jego numerze IP.
\fi




\teacher{Zadania \ref{dos_echo1} i \ref{dos_echo2} mozna zrobiÄ‡ jako wspÃ³lny dla caÅ‚ej grupy pokaz.}

\dbEntryBegin{dos_echo1}\if1\dbEntryCheckResults
Uruchom dwie instancje serwera echo korzystajÄ…cego z protokoÅ‚u UDP.

ZastanÃ³w siÄ™ co by siÄ™ staÅ‚o jeÅ¼eli jeden z tych serwerÃ³w dostaÅ‚by pakiet pochodzÄ…cy od drugiego z nich?

KorzystajÄ…c z pakietu \textit{scapy} oraz posiadajÄ…c prawa root'a moÅ¼emy przy pomocy Pythona wysyÅ‚aÄ‡ dowolnie spreparowane pakiety IP:

\begin{CodeFrame*}[python]{}
from scapy.all import IP, IPv6, UDP, send

send(IPv6(src=sIP, dst=dIP) / UDP(sport=sPort, dport=dPort) / "ABC ... XYZ")
# powyÅ¼sza funkcja utworzy (a nastÄ™pnie wyÅ›le):
#  â†’ pakiet IPv6 od sIP do dIP
#    (adresy podajemy jako napisy),
#  â†’ w ktÃ³rym jest pakiet UDP z portem ÅºrÃ³dÅ‚owym sPort i docelowym dport
#    (porty podajemy jako wartoÅ›ci numeryczne)
#  â†’ w ktÃ³rym sÄ… dane "ABC ... XYZ"

# jeÅ¼eli zamiast IPv6() uÅ¼yjemy IP() bÄ™dziemy uÅ¼ywaÄ‡ pakietu IPv4

# moÅ¼emy teÅ¼ zaimportowaÄ‡ inne funkcjonalnoÅ›ci z moduÅ‚u scapy
# (np. ICMP, TCP, ...) i uÅ¼ywaÄ‡ ich do budowy naszych pakietÃ³w
\end{CodeFrame*}

ModyfikujÄ…c powyÅ¼szy kod sprÃ³buj wysÅ‚aÄ‡ sfaÅ‚szowany pakiet adresowany do jednego z serwerÃ³w, ktÃ³ry jako adres nadawcy ma podany drugi z serwerÃ³w.

\textit{Scapy nie jest elementem biblioteki standardowej pythona â€“ konieczne moÅ¼e byÄ‡ zainstalowanie pakietu \texttt{python3-scapy} albo zainstalowanie go poprzez managera moduÅ‚Ã³w pythonowoych â€pipâ€: \texttt{pip3 install scapy-python3}.}
\fi

\dbEntryBegin{dos_echo2}\if1\dbEntryCheckResults
Zobacz co siÄ™ stanie jeÅ¼eli w sfaÅ‚szowanym pakiecie podasz ten sam serwer jako nadawcÄ™ i odbiorcÄ™.

UsÅ‚uga UDP-echo byÅ‚a kiedyÅ› powszechnie stosowanÄ… usÅ‚ugÄ… diagnostycznÄ… umoÅ¼liwiajÄ…ca testowanie poÅ‚Ä…czenia sieciowego. Do tej pory ma nawet przyznany standardowy numer portu (7).
Jak myÅ›lisz dlaczego usÅ‚uga UDP-echo nie jest juÅ¼ powszechnie dostÄ™pnÄ… na kaÅ¼dym komputerze podÅ‚Ä…czonym do Internetu?
\fi


