% Copyright (c) 2016-2020 Matematyka dla Ciekawych Åšwiata (http://ciekawi.icm.edu.pl/)
% Copyright (c) 2016-2017 Åukasz Mazurek
% Copyright (c) 2018-2020 Robert Ryszard Paciorek <rrp@opcode.eu.org>
% 
% MIT License
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

%  BEGIN: SÅ‚owniki
\subsection{SÅ‚owniki}

Kolejnym uÅ¼ytecznym typem zmiennych w Pythonie sÄ… sÅ‚owniki (zwane niekiedy \emph{mapami} lub \emph{tablicami asocjacyjnymi}). Podobnie jak listy sÅ‚uÅ¼Ä… do do przechowywania innych zmiennych.
W odrÃ³Å¼nieniu jednak od list w sÅ‚ownikach przechowywane sÄ… pary klucz - wartoÅ›Ä‡, gdzie unikalny klucz sÅ‚uÅ¼y do identyfikowania wartoÅ›ci.
\teacher{
ZwrÃ³ciÄ‡ uwagÄ™ na analogiÄ™ z normalnymi sÅ‚ownikami klucz - sÅ‚owo ktÃ³re wyszukujemy, wartoÅ›Ä‡ - jego opis
}

\begin{CodeFrame}[python]{0.60\textwidth}
slownik = { "bd" : "xx", 5: True, "a" : 11 }
for klucz in slownik:
    print (klucz, "=>", slownik[klucz])
\end{CodeFrame}
\begin{CodeFrame}{auto}
a => 11
bd => xx
5 => True
\end{CodeFrame}

ZauwaÅ¼ Å¼e zarÃ³wno klucz, jak i wartoÅ›Ä‡ mogÄ… byÄ‡ dowolnego typu oraz Å¼e sÅ‚ownik nie zachowuje kolejnoÅ›ci dodawania elementÃ³w.

MoÅ¼liwe jest takÅ¼e sprawdzanie istnienia jakiegoÅ› elementu w sÅ‚owniku, usuwanie, dodawanie i zmienianie elementÃ³w sÅ‚owniku, itd
(zwrÃ³Ä‡ takÅ¼e uwagÄ™ na innÄ… metodÄ™ wypisywania sÅ‚ownika - poprzednio iterowaliÅ›my po kluczach, teraz po liÅ›cie par klucz-wartoÅ›Ä‡):

\begin{CodeFrame}[python]{0.60\textwidth}
if "bd" in slownik:
    print ("jest element o kluczu 'bd'")
    del slownik['bd']
slownik[15] = True
slownik["a"] = "yy"
for k,v in m.items():
    print (k, "=>", v)
\end{CodeFrame}
\begin{CodeFrame}{auto}
jest element o kluczu 'bd'
a => yy
15 => True
\end{CodeFrame}
%  END: SÅ‚owniki

%  BEGIN: Sortowanie sÅ‚ownika
\subsubsection{Sortowanie sÅ‚ownika}

Jak juÅ¼ wspomnieliÅ›my sÅ‚ownik nie zachowuje porzÄ…dku elementÃ³w. JeÅ¼eli chcemy uzyskaÄ‡ posortowanÄ… listÄ™ kluczy,
wartoÅ›ci lub par klucz-wartoÅ›Ä‡ z sÅ‚ownika moÅ¼emy skorzystaÄ‡ z funkcji \python{sorted()}.
W przypadku par wywoÅ‚anie bÄ™dzie wyglÄ…daÄ‡ nastÄ™pujÄ…co:

\begin{CodeFrame}[python]{0.50\textwidth}
mapa = {'5': 3, 'bd': 20, 'a': 101}
lista = sorted( mapa.items() )
print(lista)
\end{CodeFrame}
\begin{CodeFrame}{auto}
[('5', 3), ('a', 101), ('bd', 20)]
\end{CodeFrame}

ZwrÃ³Ä‡ uwagÄ™, iÅ¼ uÅ¼yliÅ›my tej samej metody \python{items()}, z ktÃ³rej korzystaliÅ›my do iterowania po parach klucz-wartoÅ›Ä‡
(dla listy samych kluczy lub wartoÅ›ci naleÅ¼y uÅ¼yÄ‡ w tym miejscu innej metody klasy \Verb{dict}).
Zapewne zauwaÅ¼yÅ‚eÅ› Å¼e sortowanie zostaÅ‚o przeprowadzone w oparciu o klucze, co jednak jeÅ¼eli chcielibyÅ›my posortowaÄ‡ takÄ… listÄ™ w oparciu o wartoÅ›ci?
W takim przypadku moÅ¼emy skorzystaÄ‡ z opcjonalnego argumentu funkcji \python{sorted()} o nazwie \Verb{key},
ktÃ³ry przyjmuje funkcjÄ™ majÄ…cÄ… za zadanie na podstawie otrzymanego elementu listy (w tym wypadku pary klucz - wartoÅ›Ä‡) zwrÃ³ciÄ‡ klucz sortowania:

\begin{CodeFrame}[python]{0.50\textwidth}
mapa = {'5': 3, 'bd': 20, 'a': 101}
def k(x):
    return x[1]
lista = sorted( mapa.items(), key=k )
print(lista)
\end{CodeFrame}
\begin{CodeFrame}{auto}
[('5', 3), ('bd', 20), ('a', 101)]
\end{CodeFrame}
%  END: Sortowanie sÅ‚ownika

%  BEGIN: Funkcje jako argumenty
\subsection{Funkcje jako argumenty funkcji {\Symbola ğŸ¤”}}\label{Funkcje_jako_argumenty}

W powyÅ¼szym przykÅ‚adzie jednym za argumentÃ³w funkcji \python{sorted()} jest inna funkcja.
ZauwaÅ¼, Å¼e funkcja moÅ¼e byÄ‡ takim samym argumentem innej funkcji jak dowolna inna zmienna,
moÅ¼e byÄ‡ teÅ¼ wynikiem zwracanym przez funkcjÄ™ oraz moÅ¼e byÄ‡ przechowywana w zmiennej.

\begin{CodeFrame}[python]{0.50\textwidth}
def dzialanie(operacja):
    if operacja == "dodaj":
        def f(a, b):
            return a+b
        return f
    elif operacja == "mnÃ³Å¼":
        def f(a, b):
            return a*b
        return f
def dwa(funkcja, argument):
    return funkcja(2, argument)

d = dzialanie("dodaj")
a = dwa(d, 11)
b = dzialanie("mnÃ³Å¼")(3,4)
print(a, b, d(3,4))
\end{CodeFrame}
\begin{minipage}[t]{0.46\textwidth}
\begin{Verbatim}[frame=single]
13 12 7
\end{Verbatim}

\vspace{6pt}\noindent ZauwaÅ¼ Å¼e:
\begin{itemize}[leftmargin=7mm]
\item wynikiem funkcji \python{dzialanie()} jest funkcja wykonujÄ…ca wskazane dziaÅ‚anie,
\item funkcja \python{dwa()} jako argumenty przyjmuje funkcjÄ™ realizujÄ…cÄ… dziaÅ‚anie dwuargumentowe i jeden argument przekazywany do niej,
\item zmienna d wskazuje na funkcjÄ™ zwrÃ³conÄ… przez funkcjÄ™ \python{dzialanie()} i moÅ¼e byÄ‡ uÅ¼ywana jako funkcja.
\end{itemize}
\end{minipage}

\begin{teacherOnly}
ZapytaÄ‡ czy konstrukcjÄ™ if/elif w funkcji \python{dzialanie()} moÅ¼na by zastÄ…piÄ‡ sÅ‚ownikiem, jak to ewentualnie zrobiÄ‡ i jakie mogÅ‚oby mieÄ‡ to zalety bÄ…dÅº wady?

\dbEntryInsert{booklets-sections/python/zadania-dodatkowe.tex}{slownik_zamiast_ifelse-rozwiazanie}
\end{teacherOnly}
%  END: Funkcje jako argumenty
