% Copyright (c) 2020 Matematyka dla Ciekawych Świata (http://ciekawi.icm.edu.pl/)
% Copyright (c) 2020 Robert Ryszard Paciorek <rrp@opcode.eu.org>
% Copyright (c) 2020 Krzysztof Lasocki <krz.lasocki@gmail.com>
% 
% MIT License
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

\IfStrEq{\dbEntryID}{}{
	\ifdefined\noExtraInfoMode\else
		\section{Zadania}
	\fi
	\insertZadanie{\currfilepath}{miganie_wolniej}{}
	\insertZadanie{\currfilepath}{wewnetrzny_pullup}{}
	\insertZadanie{\currfilepath}{przycisk_na_innym_pinie}{}
	\insertZadanie{\currfilepath}{przycisk_jako_przelacznik}{}
	\insertZadanie{\currfilepath}{adc_volty}{}
	\insertZadanie{\currfilepath}{adc_volty2}{}
	\insertZadanie{\currfilepath}{trojkat_via_uart}{}
	\insertZadanie{\currfilepath}{trojkat_via_uart2}{}
	\insertZadanie{\currfilepath}{zmiana_i2c}{}
	\insertZadanie{\currfilepath}{i2c_rejestr}{}
}

\dbEntryBegin{miganie_wolniej}\if1\dbEntryCheckResults
  Zmień program \Verb$10_blink$ tak, aby dioda LED migała około dwa razy wolniej.
\fi

\dbEntryBegin{wewnetrzny_pullup}\if1\dbEntryCheckResults
  Zastanów się jakie zmiany należy wykonać w programie \Verb$11_di$, aby zamiast dodawać zewnętrzny rezystor podciągający użyć wbudowanego podciągania wejść.
  Sprawdź swoje przypuszczenia odpowiednio modyfikując układ i program.
\fi

\dbEntryBegin{przycisk_na_innym_pinie}\if1\dbEntryCheckResults
  Zastanów się jakie zmiany należy wykonać w programie \Verb$11_di$, aby reagował on na przycisk podłączony do pinu A1.
  Sprawdź swoje przypuszczenia odpowiednio modyfikując układ i program.
\fi

\dbEntryBegin{przycisk_jako_przelacznik}\if1\dbEntryCheckResults
  Zmodyfikuj program \Verb$11_di$ tak, aby dioda zapalała się tylko, gdy stan logiczny wejścia się zmienia.\\
  \textit{Wskazówka: co zawiera zmienna \texttt{\Verb$stan_a$} tuż przed załadowaniem jej nowym stanem? Pamiętaj
  o stanach nieustalonych.}
\fi

\dbEntryBegin{adc_volty}\if1\dbEntryCheckResults
Wiedząc, że wartość 4096 odpowiada napięciu 3.3V, a 0 napięciu 0V, zmień przykładowy program ADC (\Verb$30_adc$) tak, aby zamiast surowej wartości wypisywał wartość napięcia.\\
\textit{Wskazówka: Aby uprościć obliczenia (uniknąć działań na liczbach zmiennoprzecinkowych), Twój program może podawać wartość w mV.}
\fi

\dbEntryBegin{adc_volty2}\if1\dbEntryCheckResults
Zmodyfikuj rozwiązanie zadania \ref{adc_volty} tak aby wypisywało wynik w V, bez stosowania arytmetyki zmiennoprzecinkowej.\\
\textit{Wskazówka: Wypisz osobno część całkowitą i część ułamkową}
\fi

\dbEntryBegin{trojkat_via_uart}\if1\dbEntryCheckResults
Zmodyfikuj program \Verb$21_uart_receiver$ tak aby odbierał poprzez port szeregowy liczbę w zakresie od 2 do 9 i odpowiadał na nią trójkątem z gwiazdek odpowiedniej wielkości.
Na przykład gdy otrzyma "3" powinien to być:
\begin{Verbatim}
*
**
***
\end{Verbatim}
\fi

\dbEntryBegin{trojkat_via_uart2}\if1\dbEntryCheckResults
Zmodyfikuj rozwiązanie zadania \ref{adc_volty} tak aby obsługiwać liczby wielocyfrowe (możemy ograniczyć się np. do dwucyfrowych).
Odczyt liczby powinien kończyć w momencie wczytania znaku nowej linii. Wtedy też powinno następować generowanie trójkąta z gwiazdek.\\
\textit{Wskazówka: zrwóć uwagę na kodowanie nowej linii - \Verb$'\n'$ vs \Verb$'\r\n'$ vs \Verb$'\n\r'$, etc}
\fi

\dbEntryBegin{zmiana_i2c}\if1\dbEntryCheckResults
Zmień funkcję realizującą logikę slave'a w przykładowym kodzie I2C (\Verb$40_i2c$) tak, aby zamiast mnożyć otrzymaną liczbę przez 2, dodawał do niej jakąś (dowolną) stałą.
\fi

\dbEntryBegin{i2c_rejestr}\if1\dbEntryCheckResults
Zapoznaj się z dokumentacją posiadanego rejestru z interfejsem I2C. Podłącz swój układ do magistrali \Verb$I2C1$ mikrokontrolera (pin B7 jako SDA, pin B6 jako SCL).
Zmodyfikuj program \Verb$40_i2c$ tak aby obsługiwać posiadany rejestr - jako układ wejścia (odczyt stanu jego GPIO) oraz wyjścia (ustawianie stanu jego GPIO).\\
\textit{Wskazówka: STM32 będzie działać jako master magistrali I2C, a slavem będzie układ IO. Zatem nie będziesz potrzebować części kodu związanego z obsługą slave, działającego na \Verb$I2C2$.}
\fi
