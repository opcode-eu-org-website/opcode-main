% Copyright (c) 2017-2020 Matematyka dla Ciekawych Świata (http://ciekawi.icm.edu.pl/)
% Copyright (c) 2017-2020 Robert Ryszard Paciorek <rrp@opcode.eu.org>
% 
% MIT License
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

% BEGIN: unix intro
\section{Praca w terminalu}

Komputer potrafi jedynie wykonywać jakiś wcześniej zaprogramowany ciąg instrukcji.
Każde wydane przez użytkownika polecenie wiąże się z uruchomieniem takiego ciągu instrukcji (programu komputerowego lub jakieś funkcji w ramach niego).

Podstawowym sposobem wydawania poleceń w systemach typu Unix jest wpisywanie ich w terminalu.
Terminal może pracować w trybie tekstowym lub może być uruchomiony (jako tzw. emulator terminala) w trybie graficznym.

\subsection{Powłoka}

Wprowadzane polecenia interpretowane są przez działający w terminalu program nazywany powłoką (interpreterem poleceń).
W terminalu mogą być uruchamiane kolejne (takie same lub różne) interpretery poleceń.
Różne interpretery korzystają z różnych składni oraz często różnią się znakiem zachęty (czyli wypisanym tekstem poprzedzającym wprowadzane polecenia).

\subsubsection{bash}
Bash jest chyba najpopularniejszą powłoką (interpreterem poleceń).
Jest zgodny ze składnią z sh, zapewnia m.in. obsługę zmiennych (zasadniczo napisowych) oraz omówionych w dalszej części skryptu znaków uogólniających.
Umożliwia edycję linii poleceń, dopełnianie komend, ścieżek, itp przy pomocy tabulatora oraz zapewnia dostęp do historii linii poleceń (poruszanie się po historii strzałkami, wyszukiwanie przy pomocy Ctrl+R, polecenie \texttt{history}).

\subsubsection{screen i tmux}
\texttt{screen} i \texttt{tmux} są tzw. multiplexerami terminala - pozwala na uzyskanie wielu okien konsoli (także np. wyświetlanych jedno obok drugiego) na pojedynczym terminalu.
Ponadto pozwalają na odłączanie i podłączanie sesji, co pozwala na łatwe pozostawienie działającego programu po wylogowaniu i powrót do niego później.

\subsection{Komendy}

Unixowe komendy (czyli polecenia rozumiane przez bash lub inny interpreter zgodny z sh) składają się z nazwy polecenia oraz opcji i argumentów.
Nazwą polecenia może być nazwa funkcji wbudowanej, nazwa programu (znajdującego się w ścieżce wyszukiwania programów) lub pełna ścieżka do programu.
Po nazwie polecenia mogą występować opcje i/lub argumenty. Są one oddzielane od nazwy polecenia i od siebie przy pomocy spacji\footnote{
	zasadniczo dowolnego ciągu białych znaków: spacji, tabulatorów, ,,escapowanych'' nowych linii.
}.
Nie ma silnego rozróżnienia opcji od argumentów, typowo stosowaną konwencją jest rozpoczynanie opcji od pojedynczego myślnika (opcje krótkie - jednoliterowe) lub dwóch myślników (opcje długie).
	W przypadku stosowania tej konwencji po pojedynczym myślniku może występować kilka bezargumentowych opcji jednoliterowych.
	Typowo argumenty opcji oddzielane są od nich spacją (w przypadku opcji krótkich) lub znakiem równości (w przypadku opcji długich).
Jeżeli któryś z składników komendy (np. argument) zawiera spacje należy je zabezpieczyć przy pomocy odwrotnego ukośnika lub ujęcia zawierającego je napisu w apostrofy lub cudzysłowia.

\subsection{Uzyskiwanie pomocy}

Informację na temat działania danej komendy oraz jej opcji można uzyskać w wbudowanym systemie pomocy przy pomocy poleceń \Verb{man} lub \Verb{info} / \Verb{pinfo}.
Większość poleceń obsługuje także opcje \Verb{--help} lub \Verb{-h}, które wyświetlają informację na temat ich użycia.

\pagebreak[2]\begin{ProTip}{\normalfont{\strong{Do zapamiętania}}}
Zarówno w tekstach pomocy jak i w tym dokumencie stosowana jest konwencja polegająca na oznaczaniu opcjonalnych argumentów poprzez umieszczanie ich w nawiasach kwadartowych (jeżeli podajemy ten argument do komendy nie obejmujemy go już tymi nawiasami) oraz rozdzielaniu alternatywnych opcji przy pomocy~\Verb{|}. Np. \Verb{a [b] c|d} oznacza iż polecenie \Verb{a} wymaga argumentu postaci \Verb{c} albo \Verb{d}, który może być poprzedzony argumentem \Verb{b}.
\end{ProTip}

\subsection{more i less}

Jeżeli wynik jakiejś komendy nie mieści się na ekranie do jego obejrzenia możemy użyć poleceń \Verb{more} lub \Verb{less}. Są to programy umożliwiające przeglądanie tekstu ekran po ekranie.
\Verb{less} posiada większe możliwości od more (w szczególności posiada możliwość przeglądanie dokumentu w tył)\footnote{
wybrane przydatne opcje:
	\Verb{-X} nie czyści ekranu przy wychodzeniu z less'a (całość historii wyświetlania pliku pozostaje w historii terminala)
	\Verb{-F} automatycznie kończy gdy wyświetlany tekst mieści się na jednym ekranie
}. Programy te kończą się po wciśnięciu klawisza \Verb{q}. \Verb{less} umożliwia także wyszukiwanie -- klawisz \Verb{/} pozwala na wprowadzenie szukanej frazy, a \Verb{n} na wyszukanie kolejnego wystąpienia.
Programy te umożliwiają też wyświetlanie wskazanych jako argumenty plików.

\subsection{Przekierowania}

Typowo program posiada trzy strumienie danych: jednen wejściowy (stdin) i dwa wyjściowe (stdout i stderr). Standardowe wyjście możemy przekierować na standardowe wejście innego programu przy pomocy~\Verb{|}, np:
\begin{Verbatim}
ls --help | less
\end{Verbatim}
Konstrukcja ta przekieruje wynik komendy \Verb{ls} uruchomionej z opcją \Verb{--help} do komendy \Verb{less}.

Możemy także przekierować standardowe wyjście do pliku (przy pomocy~\Verb{>} lub~\Verb{>>}, gdy chcemy dopisywać do pliku) lub pobrać standardowe wejście z pliku (przy pomocy \Verb{<}).
\Verb{2>} pozwala na przekierowanie standardowego wyjścia błędu do pliku, a \Verb{>&} i \Verb{|&} pozwala na przekierowanie obu strumieni odpowiednio do pliku lub standardowego wejścia innego polecenia.
% END: unix intro
