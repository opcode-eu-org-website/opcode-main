% Copyright (c) 2017-2020 Matematyka dla Ciekawych Åšwiata (http://ciekawi.icm.edu.pl/)
% Copyright (c) 2017-2020 Robert Ryszard Paciorek <rrp@opcode.eu.org>
% 
% MIT License
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

\documentclass{pdfBooklets}

\title{Linux i sieci: Podstawowe polecenia Unix'a}
\author{%
	Projekt ,,Matematyka dla Ciekawych Åšwiata'',\\
	Robert Ryszard Paciorek\\\normalsize\ttfamily <rrp@opcode.eu.org>
}
\date  {2020-06-05}

\makeatletter\hypersetup{
	pdftitle = {\@title}, pdfauthor = {\@author}
}\makeatother

\usepackage[ampersand]{easylist}

\begin{document}

\maketitle

% BEGIN: unix intro
\section{Praca w terminalu}

\section{Praca w terminalu}

Komputer potrafi jedynie wykonywaÄ‡ jakiÅ› wczeÅ›niej zaprogramowany ciÄ…g instrukcji.
KaÅ¼de wydane przez uÅ¼ytkownika polecenie wiÄ…Å¼e siÄ™ z uruchomieniem takiego ciÄ…gu instrukcji (programu komputerowego lub jakieÅ› funkcji w ramach niego).

Podstawowym sposobem wydawania poleceÅ„ w systemach typu Unix jest wpisywanie ich w terminalu.
Terminal moÅ¼e pracowaÄ‡ w trybie tekstowym lub moÅ¼e byÄ‡ uruchomiony (jako tzw. emulator terminala) w trybie graficznym.

\subsection{PowÅ‚oka}

Wprowadzane polecenia interpretowane sÄ… przez dziaÅ‚ajÄ…cy w terminalu program nazywany powÅ‚okÄ… (interpreterem poleceÅ„).
W terminalu mogÄ… byÄ‡ uruchamiane kolejne (takie same lub rÃ³Å¼ne) interpretery poleceÅ„.
RÃ³Å¼ne interpretery korzystajÄ… z rÃ³Å¼nych skÅ‚adni oraz czÄ™sto rÃ³Å¼niÄ… siÄ™ znakiem zachÄ™ty (czyli wypisanym tekstem poprzedzajÄ…cym wprowadzane polecenia).

\subsubsection{bash}
Bash jest chyba najpopularniejszÄ… powÅ‚okÄ… (interpreterem poleceÅ„).
Jest zgodny ze skÅ‚adniÄ… z sh, zapewnia m.in. obsÅ‚ugÄ™ zmiennych (zasadniczo napisowych) oraz omÃ³wionych w dalszej czÄ™Å›ci skryptu znakÃ³w uogÃ³lniajÄ…cych.
UmoÅ¼liwia edycjÄ™ linii poleceÅ„, dopeÅ‚nianie komend, Å›cieÅ¼ek, itp przy pomocy tabulatora oraz zapewnia dostÄ™p do historii linii poleceÅ„ (poruszanie siÄ™ po historii strzaÅ‚kami, wyszukiwanie przy pomocy Ctrl+R, polecenie \texttt{history}).

\subsubsection{screen i tmux}
\texttt{screen} i \texttt{tmux} sÄ… tzw. multiplexerami terminala - pozwala na uzyskanie wielu okien konsoli (takÅ¼e np. wyÅ›wietlanych jedno obok drugiego) na pojedynczym terminalu.
Ponadto pozwalajÄ… na odÅ‚Ä…czanie i podÅ‚Ä…czanie sesji, co pozwala na Å‚atwe pozostawienie dziaÅ‚ajÄ…cego programu po wylogowaniu i powrÃ³t do niego pÃ³Åºniej.

\subsection{Komendy}

Unixowe komendy (czyli polecenia rozumiane przez bash lub inny interpreter zgodny z sh) skÅ‚adajÄ… siÄ™ z nazwy polecenia oraz opcji i argumentÃ³w.
NazwÄ… polecenia moÅ¼e byÄ‡ nazwa funkcji wbudowanej, nazwa programu (znajdujÄ…cego siÄ™ w Å›cieÅ¼ce wyszukiwania programÃ³w) lub peÅ‚na Å›cieÅ¼ka do programu.
Po nazwie polecenia mogÄ… wystÄ™powaÄ‡ opcje i/lub argumenty. SÄ… one oddzielane od nazwy polecenia i od siebie przy pomocy spacji\footnote{
	zasadniczo dowolnego ciÄ…gu biaÅ‚ych znakÃ³w: spacji, tabulatorÃ³w, ,,escapowanych'' nowych linii.
}.
Nie ma silnego rozrÃ³Å¼nienia opcji od argumentÃ³w, typowo stosowanÄ… konwencjÄ… jest rozpoczynanie opcji od pojedynczego myÅ›lnika (opcje krÃ³tkie - jednoliterowe) lub dwÃ³ch myÅ›lnikÃ³w (opcje dÅ‚ugie).
	W przypadku stosowania tej konwencji po pojedynczym myÅ›lniku moÅ¼e wystÄ™powaÄ‡ kilka bezargumentowych opcji jednoliterowych.
	Typowo argumenty opcji oddzielane sÄ… od nich spacjÄ… (w przypadku opcji krÃ³tkich) lub znakiem rÃ³wnoÅ›ci (w przypadku opcji dÅ‚ugich).
JeÅ¼eli ktÃ³ryÅ› z skÅ‚adnikÃ³w komendy (np. argument) zawiera spacje naleÅ¼y je zabezpieczyÄ‡ przy pomocy odwrotnego ukoÅ›nika lub ujÄ™cia zawierajÄ…cego je napisu w apostrofy lub cudzysÅ‚owia.

\subsection{Uzyskiwanie pomocy}

InformacjÄ™ na temat dziaÅ‚ania danej komendy oraz jej opcji moÅ¼na uzyskaÄ‡ w wbudowanym systemie pomocy przy pomocy poleceÅ„ \Verb{man} lub \Verb{info} / \Verb{pinfo}.
WiÄ™kszoÅ›Ä‡ poleceÅ„ obsÅ‚uguje takÅ¼e opcje \Verb{--help} lub \Verb{-h}, ktÃ³re wyÅ›wietlajÄ… informacjÄ™ na temat ich uÅ¼ycia.

\pagebreak[2]\begin{ProTip}{\normalfont{\strong{Do zapamiÄ™tania}}}
ZarÃ³wno w tekstach pomocy jak i w tym dokumencie stosowana jest konwencja polegajÄ…ca na oznaczaniu opcjonalnych argumentÃ³w poprzez umieszczanie ich w nawiasach kwadartowych (jeÅ¼eli podajemy ten argument do komendy nie obejmujemy go juÅ¼ tymi nawiasami) oraz rozdzielaniu alternatywnych opcji przy pomocy~\Verb{|}. Np. \Verb{a [b] c|d} oznacza iÅ¼ polecenie \Verb{a} wymaga argumentu postaci \Verb{c} albo \Verb{d}, ktÃ³ry moÅ¼e byÄ‡ poprzedzony argumentem \Verb{b}.
\end{ProTip}

\subsection{more i less}

JeÅ¼eli wynik jakiejÅ› komendy nie mieÅ›ci siÄ™ na ekranie do jego obejrzenia moÅ¼emy uÅ¼yÄ‡ poleceÅ„ \Verb{more} lub \Verb{less}. SÄ… to programy umoÅ¼liwiajÄ…ce przeglÄ…danie tekstu ekran po ekranie.
\Verb{less} posiada wiÄ™ksze moÅ¼liwoÅ›ci od more (w szczegÃ³lnoÅ›ci posiada moÅ¼liwoÅ›Ä‡ przeglÄ…danie dokumentu w tyÅ‚)\footnote{
wybrane przydatne opcje:
	\Verb{-X} nie czyÅ›ci ekranu przy wychodzeniu z less'a (caÅ‚oÅ›Ä‡ historii wyÅ›wietlania pliku pozostaje w historii terminala)
	\Verb{-F} automatycznie koÅ„czy gdy wyÅ›wietlany tekst mieÅ›ci siÄ™ na jednym ekranie
}. Programy te koÅ„czÄ… siÄ™ po wciÅ›niÄ™ciu klawisza \Verb{q}. \Verb{less} umoÅ¼liwia takÅ¼e wyszukiwanie -- klawisz \Verb{/} pozwala na wprowadzenie szukanej frazy, a \Verb{n} na wyszukanie kolejnego wystÄ…pienia.
Programy te umoÅ¼liwiajÄ… teÅ¼ wyÅ›wietlanie wskazanych jako argumenty plikÃ³w.

\subsection{Przekierowania}

Typowo program posiada trzy strumienie danych: jednen wejÅ›ciowy (stdin) i dwa wyjÅ›ciowe (stdout i stderr). Standardowe wyjÅ›cie moÅ¼emy przekierowaÄ‡ na standardowe wejÅ›cie innego programu przy pomocy~\Verb{|}, np:
\begin{Verbatim}
ls --help | less
\end{Verbatim}
Konstrukcja ta przekieruje wynik komendy \Verb{ls} uruchomionej z opcjÄ… \Verb{--help} do komendy \Verb{less}.

MoÅ¼emy takÅ¼e przekierowaÄ‡ standardowe wyjÅ›cie do pliku (przy pomocy~\Verb{>} lub~\Verb{>>}, gdy chcemy dopisywaÄ‡ do pliku) lub pobraÄ‡ standardowe wejÅ›cie z pliku (przy pomocy \Verb{<}).
\Verb{2>} pozwala na przekierowanie standardowego wyjÅ›cia bÅ‚Ä™du do pliku, a \Verb{>&} i \Verb{|&} pozwala na przekierowanie obu strumieni odpowiednio do pliku lub standardowego wejÅ›cia innego polecenia.
% END: unix intro

% BEGIN: vi i vim
\subsection{vi i vim}
\Verb{vi} jest chyba najbardziej zaawansowanym edytorem, ktÃ³rego obecnoÅ›Ä‡ gwarantuje standard POSIX\footnote{IEEE Std 1003.1-2017 (The Open Group Base Specifications Issue 7, 2018 edition), XCU part \url{https://pubs.opengroup.org/onlinepubs/9699919799/}}.
\Verb{vim} jest mocno rozbudowanym jego klonem, oferujÄ…cym bardzo zaawansowane funkcjonalnoÅ›ci, powszechnie stosowanym jako zamiennik oryginalnego \Verb{vi}.
\Verb{vim} obsÅ‚uguje 3 podstawowe tryby pracy: komend (sÅ‚uÅ¼Ä…cy do wydawania opisanych niÅ¼ej poleceÅ„), wizualny (sÅ‚uÅ¼Ä…cy do zaznaczania i wydawania niektÃ³rych komend), edycji (wstawiania/nadpisywania - sÅ‚uÅ¼Ä…cy do wprowadzania tekstu).
Podstawowa klawiszologia:
\begin{itemize}
\item \Verb{Esc} powrÃ³t do trybu komend
\item \Verb{i} tryb wstawiania
\item \Verb{R} tryb zastÄ™powania
\item \Verb{Insert} zmiana trybu wstawiania i zastÄ™powania
\item \Verb{v} tryb wizualny (umoÅ¼liwia zaznaczenie przy pomocy strzaÅ‚ek)

\vspace{6pt}

\item \Verb{y} skopiuj; \Verb{d} - wytnij (skopiuj i usuÅ„)\\
	po \Verb{y}, \Verb{d} moÅ¼na podaÄ‡ np. \texttt{20l} lub \texttt{20[strzaÅ‚ka w prawo]} co oznacza 20 kolejnych znakÃ³w, \texttt{2w}~oznacza dwa sÅ‚owa
\item \Verb{x} wytnij (skopiuj i usuÅ„) znak (moÅ¼e byÄ‡ poprzedzone iloÅ›ciÄ… znakÃ³w do wyciÄ™cia)
\item \Verb{yy} skopiuj liniÄ™; \Verb{dd} - wytnij (skopiuj i usuÅ„)\\
	w obu wypadkach moÅ¼e byÄ‡ poprzedzone iloÅ›ciÄ… linii do skopiowania/wyciÄ™cia

\vspace{6pt}

\item \Verb{p} wkleja po; \Verb{P} - wkleja przed
\item \Verb{u} cofa ostatniÄ… operacjÄ™

\vspace{6pt}

\item \Verb{/} szukanie
\item \Verb{n} wyszukanie nastÄ™pnego wystÄ…pienie; \Verb{N} wyszukanie poprzedniego wystÄ…pienie
\item \Verb{G} przejÅ›cie do wskazanej linii, numer podajemy przed G, 0 oznacza ostatniÄ… liniÄ™ w pliku, wiÄ™c \Verb{0G} spowoduje przejÅ›cie do niej

\vspace{6pt}

\item \Verb{:[zakres]s@regexp@napis@[g]} wyszukaj i zastÄ…p wyraÅ¼enie regularne regexp przez napis;
	zakres moÅ¼e byÄ‡:
	\begin{itemize}
		\item numerem linii,
		\item przedziaÅ‚em z numerami linii postaci \Verb{pierwsza,ostatnia}, gdzie:\\
			\Verb{.}~oznacza bieÅ¼Ä…cÄ… liniÄ™,
			\Verb{$}~oznacza ostatniÄ… liniÄ™ w pliku,
			wartoÅ›Ä‡ numeryczna poprzedzona \Verb{+}~oznacza tyle kolejnych linii od bieÅ¼Ä…cej, a poprzedzona \Verb{-}~przed bieÅ¼Ä…cÄ…,
		\item znakiem \Verb{%} (co oznacza caÅ‚y plik),
		\item zakresem zaznaczonym w trybie wizualnym;
	\end{itemize}
	podanie opcji g powoduje zastÄ™powanie wszystkich wystÄ…pieÅ„ a nie tylko pierwszego;\\
	znak \Verb{@} peÅ‚ni rolÄ™ separatora i moÅ¼e zostaÄ‡ zamiast niego uÅ¼yty inny znak

\vspace{6pt}

\item \Verb{:e Å›cieÅ¼ka} otwarcie wskazanego pliku
\item \Verb{:w} zapis (moÅ¼na takÅ¼e podaÄ‡ Å›cieÅ¼kÄ™ pod jaka ma zostaÄ‡ zapisany plik)
\item \Verb{:q} wyjÅ›cie
      ;
      \Verb{:q!} wyjÅ›cie bez zapisywania
      ;
      \Verb{:wq} zapis i wyjÅ›cie

\vspace{6pt}

\item \Verb{:n} - nastÄ™pny plik
      ;
      \Verb{:N} - poprzedni plik
\item \Verb{:split} - podziaÅ‚ okna
      ;
      \Verb{:vs} - pionowy podziaÅ‚ okna
      ;
      \Verb{Ctrl}+\Verb{W} a nastÄ™pnie strzaÅ‚ka - przeÅ‚Ä…czanie miÄ™dzy oknami

\vspace{6pt}

\item \Verb{:%!xxd} pokazanie wartoÅ›ci numerycznych i umoÅ¼liwienie edycji pliku jako binarnego;
      \\
      \Verb{:%!xxd -r} powrÃ³t do normalnej edycji
\end{itemize}
% END: vi i vim

\section{Operacje na systemie plikÃ³w}

\subsection{Podstawowe komendy}

\teacher{PokazaÄ‡ i omÃ³wiÄ‡ dziaÅ‚anie komend wykonujÄ…c je w terminalu na rzutniku}

% BEGIN: Operacje na systemie plikÃ³w
\subsubsection{katalog roboczy}
\begin{itemize}
	\item \Verb{cd [Å›cieÅ¼ka]}
		zmiana bieÅ¼Ä…cego katalogu,\\
			warto zauwaÅ¼yÄ‡, iÅ¼ katalogi w Å›cieÅ¼ce oddzielamy ukoÅ›nikami \texttt{/}, bieÅ¼Ä…cy katalog oznaczamy kropkÄ… \texttt{.}, nadrzÄ™dny oznaczamy dwiema kropkami \texttt{..},\\
			Å›cieÅ¼ki zaczynajÄ…ce siÄ™ od ukoÅ›nika \texttt{/} oznaczajÄ… \emph{Å›cieÅ¼ki bezwzglÄ™dne} (od korzenia systemu plikÃ³w), pozostaÅ‚e oznaczajÄ… \emph{Å›cieÅ¼kÄ™ wzglÄ™dnÄ…} (wyraÅ¼onÄ… wzglÄ™dem bierzÄ…cego katalogu),\\
			katalog domowy oznacza siÄ™ tyldÄ…\ \ \texttt{\~}
		
	\item \Verb{pwd}
		wyÅ›wietla Å›cieÅ¼kÄ™ do bieÅ¼Ä…cego katalogu
\end{itemize}

\subsubsection{wyÅ›wietlanie i wyszukiwanie}
\teacher{JuÅ¼ na poczÄ…tku omawiania \texttt{ls} warto omÃ³wiÄ‡ znaki uogÃ³lniajÄ…ce - patrz poniÅ¼ej}
\begin{itemize}
	\item \Verb{ls [opcje] [Å›cieÅ¼ka]}
		listowanie zawartoÅ›ci katalogu, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-a} wyÅ›wietlaj pliki ukryte (zaczynajÄ…cych siÄ™ od kropki)\\
			\texttt{-l} wyÅ›wietlaj pliki w formie listy z szczegÃ³Å‚owymi informacjami (uprawnienia, rozmiar, data modyfikacji, wÅ‚aÅ›ciciel, grupa, rozmiar)\\
			\texttt{-1} wyÅ›wietlaj pliki w formie 1 plik w jednej linii (bez dodatkowych informacji; stosowane domyÅ›lne gdy wynik komendy przekazywany jest strumieniem do innej komendy lub pliku)\\
			\texttt{-h} stosuj jednostki typu k, M, G zamiast podawaÄ‡ rozmiar w bajtach\\
			\texttt{-t} sortuj wg daty modyfikacji\\
			\texttt{-S} sortuj wg rozmiaru\\
			\texttt{-r} odwrÃ³Ä‡ kolejnoÅ›Ä‡ sortowania\\
			\texttt{-c} uÅ¼yj daty utworzenia zamiast daty modyfikacji (stosowane w poÅ‚Ä…czeniu z \texttt{-l} i/lub \texttt{-t})\\
			\texttt{-d} wyÅ›wietlaj informacje o katalogu zamiast jego zawartoÅ›ci
		
	\item \Verb{find [opcje] [katalog startowy] [wyraÅ¼enie]}
		wyszukiwanie w systemie plikÃ³w w oparciu o nazwÄ™/Å›cieÅ¼kÄ™ lub wÅ‚aÅ›ciwoÅ›ci pliku, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-P} wypisuj informacje o linkach symbolicznych a nie plikach przez nie wskazywanych (domyÅ›lne)\\
			\texttt{-L} wypisuj informacje o wskazywanych przez linki symboliczne plikach\\
		do waÅ¼niejszych elementÃ³w wyraÅ¼enia naleÅ¼y zaliczyÄ‡:\\
			\texttt{-name "wyraÅ¼enie"} pliki ktÃ³rych nazwa pasuje do wyraÅ¼enia korzystajÄ…cego z shellowych znakÃ³w uogÃ³lniajÄ…cych\\
				komenda find (w odrÃ³Å¼nieniu np. od \texttt{ls}) samodzielnie interpretujÄ… wyraÅ¼enia zawierajÄ…ce shellowe znaki uogÃ³lniajÄ…ce, w zwiÄ…zku z czym konieczne moÅ¼e siÄ™ okazaÄ‡ zabezpieczenie ich przed interpretacjÄ… przez powÅ‚okÄ™ np. przy pomocy umieszczenia wewnÄ…trz pojedynczych cudzysÅ‚owÃ³w\\
			\texttt{-iname "wyraÅ¼enie"} jak \texttt{-name}, tyle Å¼e nie rozrÃ³Å¼nia wielkoÅ›ci liter\\
			\texttt{-path "wyraÅ¼enie"} pliki ktÃ³rych Å›cieÅ¼ka pasuje do wyraÅ¼enia korzystajÄ…cego z shellowych znakÃ³w uogÃ³lniajÄ…cych\\
			\texttt{-ipath "wyraÅ¼enie"} jak \texttt{-path}, tyle Å¼e nie rozrÃ³Å¼nia wielkoÅ›ci liter\\
			\texttt{-regex "wyraÅ¼enie"} pliki ktÃ³rych Å›cieÅ¼ka pasuje do wyraÅ¼enia regularnego\\
			\texttt{-iregex "wyraÅ¼enie"} jak \texttt{-regexp}, tyle Å¼e nie rozrÃ³Å¼nia wielkoÅ›ci liter\vspace{6pt}\\
			%
			\texttt{warunek -o warunek} Å‚Ä…czy warunki sumÄ… logicznÄ… â€ORâ€ (zamiast domyÅ›lnego iloczynu logicznegoÂ â€ANDâ€)\\
			\texttt{! warunek} negacja warunku\vspace{6pt}\\
			%
			\texttt{-mtime [+|-]n} pliki ktÃ³rych modyfikacja odbyÅ‚a siÄ™ \texttt{n}*24 godziny temu\\
			\texttt{-mmin [+|-]n} pliki ktÃ³rych modyfikacja odbyÅ‚a siÄ™ \texttt{n} minut temu\\
			\texttt{-ctime [+|-]n} pliki ktÃ³re zostaÅ‚y utworzone \texttt{n}*24 godziny temu\\
			\texttt{-cmin [+|-]n} pliki ktÃ³re zostaÅ‚y utworzone \texttt{n} minut temu\\
			\texttt{-size [+|-]n[c|k|M|G]} pliki ktÃ³rych rozmiar wynosi \texttt{n} (c - bajtÃ³w, k - kilobajtÃ³w, M - MegabajtÃ³w, G - gigabajtÃ³w)\\
			\strong{\emph{w powyÅ¼szych testach \texttt{+} oznacza wiÄ™cej niÅ¼, \texttt{-} oznacza mniej niÅ¼, uwaga: porÃ³wnywaniu podlegajÄ… liczby caÅ‚kowite, np. +1 oznaczacza $>1$ w liczbach caÅ‚kowitych tzn. $\ge2$}}\vspace{6pt}\\
			%
			\texttt{-exec}\Verb@ polecenie \{\} \;@ dla kaÅ¼dego znalezionego pliku wykonaj \texttt{polecenie} podstawiajÄ…c Å›cieÅ¼kÄ™ do tego pliku pod \Verb@\{\}@ (zastosowane odwrotne ukoÅ›niki sÅ‚uÅ¼Ä… zabezpieczeniu nawiasÃ³w klamrowych i Å›rednika przed zinterpretowaniem ich przez powÅ‚okÄ™)\\
			\Verb@-execdir polecenie \{\} \;@, podobnie jak \texttt{-exec} tyle Å¼e polecenie zostanie uruchomione w katalogu w ktÃ³rym znajduje siÄ™ wyszukany plik
		
	\item \Verb{du [opcje] Å›cieÅ¼ka1 [Å›cieÅ¼ka2 [...]]}
		wyÅ›wietlanie informacji o zajÄ™tej przestrzeni dyskowej przez wskazane pliki / katalogi, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-s} podaje Å‚Ä…cznÄ… iloÅ›Ä‡ zajÄ™tego miejsca dla kaÅ¼dego argumentÃ³w (zamiast wypisywaÄ‡ rozmiar kaÅ¼dego pliku)\\
			\texttt{-c} podaje Å‚Ä…cznÄ… iloÅ›Ä‡ zajÄ™tego miejsca dla wszystkich argumentÃ³w\\
			\texttt{-h} stosuje jednostki typu k, M, G\\
		podawany rozmiar moÅ¼e siÄ™ rÃ³Å¼niÄ‡ (w obie strony) od wyniku ls: ls podaje rozmiar pliku (ile zawiera informacji lub ile zostaÅ‚o zadekarowane Å¼e moÅ¼e jej zawieraÄ‡), a du to ile zajmuje na dysku
		
	\item \Verb{df [opcje]}
		wyÅ›wietlanie informacji o zajÄ™toÅ›ci miejsca na poszczegÃ³lnych systemach plikÃ³w
\end{itemize}

\noindent W Å›cieÅ¼kach i nazwach plikÃ³w moÅ¼na korzystaÄ‡ z znakÃ³w uogÃ³lniajÄ…cych powÅ‚oki takich jak:
\begin{itemize}
	\item \Verb{?} oznaczajÄ…cy dowolny znak
	\item \Verb{*} oznaczajÄ…cy dowolny (takÅ¼e pusty) ciÄ…g znakÃ³w
	\item \Verb{[a-z AD]} oznaczajÄ…cy dowolny znak z wymienionych w zbiorze ujÄ™tym w nawiasach kwadratowych, zbiÃ³r moÅ¼e byÄ‡ definiowany z uÅ¼yciem zakresÃ³w, np. a-z AD oznacza dowolnÄ… maÅ‚Ä… literÄ™ od a do z wÅ‚Ä…cznie, spacjÄ™, duÅ¼Ä… literÄ… A lub D
	\item \Verb{[!a-z]} oznaczajÄ…cy dowolny znak z wyjÄ…tkiem znakÃ³w wymienionych w podanym zbiorze, zbiÃ³r moÅ¼e byÄ‡ definiowany z uÅ¼yciem zakresÃ³w, np. a-z oznacza dowolnÄ… maÅ‚Ä… literÄ™ od a do z wÅ‚Ä…cznie
\end{itemize}
ÅšcieÅ¼ki mogÄ… byÄ‡ podawane takÅ¼e jako napisy ujÄ™te w cudzysÅ‚owie pojedynczym (\texttt{'}, np. \texttt{'aaa bbb'}) lub podwÃ³jnym (\texttt{"}, np. \texttt{"aaa bbb"}) celem np. ochrony spacji w nich wystÄ™pujÄ…cych.
Oba typy cudzysÅ‚owÃ³w zabezpieczajÄ… przed rozwijaniem znakÃ³w uogÃ³lniajÄ…cych (zastÄ™powaniem napisu ze znakami listÄ… pasujÄ…cych nazw / Å›cieÅ¼ek). CudzysÅ‚Ã³w pojedynczy (w odrÃ³Å¼nieniu od podwÃ³jnego) zabezpiecza takÅ¼e przed interpretacjÄ… umieszczonych wewnÄ…trz innych znakÃ³w specjalnych takich jak odwoÅ‚ania do zmiennych.

\begin{teacherOnly}
Warto omÃ³wiÄ‡ nastÄ™pujÄ…ce przykÅ‚ady:
\begin{Verbatim}
# pliki z jednoznakowÄ… nazwÄ…
ls ?
# pliki zaczynajÄ…ce siÄ™ od znaku zapytania
ls \?*
# pliki nie zaczynajÄ…ce siÄ™ od a
ls [!a]*
# pliki majÄ…ce w nazwie literÄ™ b
ls *b*
# pliki majÄ…ce w nazwie literÄ™ a lub b
ls *[ab]*
# pliki zaczynajÄ…ce siÄ™ od liter a,b,c,d
ls [a-d]*
\end{Verbatim}
\end{teacherOnly}

Warto zauwaÅ¼yÄ‡, iÅ¼ w przypadku komendy \texttt{ls} znaki uogÃ³lniajÄ…ce muszÄ… byÄ‡ rozwiniÄ™te przez powÅ‚okÄ™.
Natomiast w przypadku komendy \texttt{find} na ogÃ³Å‚ chcemy aby nie byÅ‚y rozwijane przez powÅ‚okÄ™, ale interpretowane przez samÄ… komendÄ™ \texttt{find}.
W tym celu powinniÅ›my je zabezpieczyÄ‡ przed rozwiniÄ™ciem przy pomocy cudzysÅ‚owÃ³w.

ZauwaÅ¼ rÃ³wnieÅ¼, Å¼e jeÅ¼eli komanda \texttt{ls} w wyniku rozwiniÄ™cia znakÃ³w uogÃ³lniajÄ…cych dostanie jako argument Å›cieÅ¼kÄ™ do katalogu to wylistuje jego zawartoÅ›Ä‡ (zachowanie to zmienia opcja \texttt{-d}).

\subsubsection{kopiowanie, przenoszenie, usuwanie, ...}
\begin{itemize}
	\item \Verb{cp [opcje] ÅºrÃ³dÅ‚o1 [ÅºrÃ³dÅ‚o2 [...]] cel}
		kopiuje wskazany plik (lub pliki) do wskazanej lokalizacji, w przypadku kopiowania wielu plikÃ³w cel powinien byÄ‡ katalogiem, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-r} pozwala na (rekursywne) kopiowanie katalogÃ³w\\
			\texttt{-a} podobnie jak \texttt{-r}, dodatkowo zachowujÄ…c atrybuty plikÃ³w\\
			\texttt{-l} zamiast kopiowaÄ‡ tworzy twarde dowiÄ…zania (hard links)\\
			\texttt{-s} zamiast kopiowaÄ‡ tworzy linki symboliczne do plikÃ³w\\
			\texttt{-f} nadpisywanie bez pytania\\
			\texttt{-i} zawsze pytaj przed nadpisaniem
		
	\item \Verb{ln ÅºrÃ³dÅ‚o1 [ÅºrÃ³dÅ‚o2 [...]] cel}
		tworzy link twardy do wskazanego pliku (lub plikÃ³w) w wskazanej lokalizacji, w przypadku wskazania wielu plikÃ³w ÅºrÃ³dÅ‚owych cel powinien byÄ‡ katalogiem, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-s} tworzy dowiÄ…zania symboliczne zamiast twardych\\
			\texttt{-r} uÅ¼ywa Å›cieÅ¼ki wzglÄ™dnej zamiast bezwzglÄ™dnej przy tworzeniu dowiÄ…zaÅ„ symbolicznych
				\\
				Link twardy jest innym uchwytem do tych samych danych i moÅ¼e byÄ‡ uÅ¼ywany takÅ¼e po skasowaniu oryginalnego pliku. LiczbÄ™ dowiÄ…zaÅ„ do danego pliku pokazuje m.in. komenda \Verb{ls} z opcjÄ… \Verb{-l}.
				Nie moÅ¼na utworzyÄ‡ linkÃ³w twardych do katalogÃ³w, ani do plikÃ³w na innym zasobie dyskowym (innym systemie plikÃ³w).
				\\
				Link symboliczny wskazuje na konkretnÄ… Å›cieÅ¼kÄ™ (wzglÄ™dnÄ… lub bezwzglÄ™dnÄ… â€“ co moÅ¼e mieÄ‡ znaczenie przy przenoszeniu takiego linku) do dowolnego (nawet nie istniejÄ…cego â€“ wtedy mÃ³wimy o zerwanym linku) pliku lub katalogu.
				\vspace{5pt}\\\hspace*{1cm}\includegraphics[width=0.75\textwidth]{link_twardy_i_symboliczny}
		
	\item \Verb{mv [opcje] ÅºrÃ³dÅ‚o1 [ÅºrÃ³dÅ‚o2 [...]] cel}
		przenosi wskazane pliki / katalogi do wskazanej lokalizacji, w przypadku przenoszenia wielu plikÃ³w cel powinien byÄ‡ katalogiem, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-f} nadpisywanie bez pytania\\
			\texttt{-i} zawsze pytaj przed nadpisaniem
		
	\item \Verb{rm [opcje] Å›cieÅ¼ka1 [Å›cieÅ¼ka2 [...]]}
		usuwa wskazane pliki, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-r} pozwala na na (rekursywne) kasowanie katalogÃ³w wraz z zawartoÅ›ciÄ…\\
			\texttt{-f} usuwanie bez pytania\\
			\texttt{-i} zawsze pytaj przed usuniÄ™ciem
			
	\item \Verb{mkdir [opcje] Å›cieÅ¼ka1 [Å›cieÅ¼ka2 [...]]}
		tworzy wskazane katalogi, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-p} pozwala na tworzenie caÅ‚ej Å›cieÅ¼ki a nie tylko ostatniego elementu, nie zgÅ‚asza bÅ‚Ä™du gdy wskazany katalog istnieje
\end{itemize}
% END: Operacje na systemie plikÃ³w

% BEGIN: Struktura katalogÃ³w
\subsection{Struktura katalogÃ³w}

Systemy unix'owe posiadajÄ… drzewiasty system plikÃ³w zaczynajÄ…cy siÄ™ w katalogu gÅ‚Ã³wnym oznaczanym przez ukoÅ›nik (\texttt{/}), w ktÃ³rym zamontowany jest gÅ‚Ã³wny system plikÃ³w (rootfs), inne systemy plikÃ³w mogÄ… byÄ‡ montowane w kolejnych katalogach. Do najistotniejszych katalogÃ³w naleÅ¼y zaliczyÄ‡:
\begin{itemize}
	\item \Verb{/bin}
	      zawierajÄ…cy pliki wykonywalne podstawowych programÃ³w
	\item \Verb{/sbin}
	      zawierajÄ…cy pliki wykonywalne podstawowych programÃ³w administracyjnych
	\item \Verb{/lib}
	      zawierajÄ…cy pliki podstawowych bibliotek
	\item \Verb{/usr}
	      zawierajÄ…cy oprogramowanie dodatkowe (wewnÄ™trznie ma podobnÄ… strukturÄ™ do gÅ‚Ã³wnego - tzn. katalogi \texttt{/usr/bin}, \texttt{/usr/sbin}, \texttt{/usr/lib}, itd)
	
	\vspace{6pt}
	
	\item \Verb{/etc}
	      zawierajÄ…cy konfiguracje ogÃ³lnosystemowe
	\item \Verb{/var}
	      zawierajÄ…cy dane programÃ³w i usÅ‚ug (takie jak kolejka poczty, harmonogramy zadaÅ„, bazy danych)
	\item \Verb{/home}
	      zawierajÄ…cy katalogi domowe uÅ¼ytkownikÃ³w (czÄ™sto montowany z innego systemu plikÃ³w, dlatego teÅ¼ root ma swÃ³j katalog domowy w \texttt{/root}, aby byÅ‚ dostÄ™pny nawet gdy takie montowanie nie doszÅ‚o do skutku)
	\item \Verb{/tmp}
	      zawierajÄ…cy pliki tymczasowe (typowo czyszczony przy starcie systemu); w Linuxie wystÄ™puje teÅ¼ \texttt{/run} przeznaczony do trzymania danych tymczasowych dziaÅ‚ajÄ…cych usÅ‚ug takich jak numery pid, blokady, itp
	
	\vspace{6pt}
	
	\item \Verb{/dev}
	      zawierajÄ…cy pliki reprezentujÄ…ce urzÄ…dzenia; w Linuxie wystÄ™puje teÅ¼ \texttt{/sys} zawierajÄ…cy informacje i ustawienia dotyczÄ…ce m.in. urzÄ…dzeÅ„
	\item \Verb{/proc}
	      zawierajÄ…cy informacje o dziaÅ‚ajÄ…cych procesach (w Linuxie takÅ¼e interfejs konfiguracyjny dla wielu parametrÃ³w jÄ…dra)
\end{itemize}
Pliki i katalogi ktÃ³rych nazwa rozpoczyna siÄ™ od kropki traktowane sÄ… jako pliki ukryte.

Z punktu widzenia programisty czy teÅ¼ uÅ¼ytkownika (prawie) wszystko jest plikiem, ktÃ³rych istniejÄ… rÃ³Å¼ne rodzaje (zwykÅ‚y plik, katalog, urzÄ…dzenie znakowe, urzÄ…dzenie blokowe, link symboliczny, kolejka FIFO, ...); pewnym wyjÄ…tkiem sÄ… urzÄ…dzenia sieciowe (ktÃ³re nie majÄ… reprezentacji w systemie plikÃ³w (ale gniazda zwiÄ…zane z nawiÄ…zanymi poÅ‚Ä…czeniami obsÅ‚uguje siÄ™ zasadniczo tak jak pliki).
% END: Struktura katalogÃ³w

\setcounter{subsection}{0} % \subsection{zadania}

% BEGIN: system plikow - zadania
\begin{Zadanie}{}{lsetc}
WyÅ›wietliÄ‡ nazwy (mogÄ… byÄ‡ wraz z peÅ‚nÄ… Å›cieÅ¼kÄ…) wszystkich plikÃ³w i katalogÃ³w znajdujÄ…cych siÄ™ bezpoÅ›rednio w \texttt{/etc/} ktÃ³rych druga litera to \texttt{a} natomiast trzecia to \texttt{p} lub \texttt{s}.

\emph{WskazÃ³wka: to zadanie nie wymaga stosowania find.}
\end{Zadanie}

\begin{Zadanie}{}{findetc}
Wyszukaj (rekurencyjnie) wszystkie pliki w katalogu \texttt{/etc/} zmodyfikowane w przeciÄ…gu ostatnich 48 godzin.
\end{Zadanie}

\begin{Zadanie}{}{linki_symboliczne}
UtworzyÄ‡ w katalogu \texttt{/tmp} linki symboliczne \texttt{ll1} i \texttt{ll2} wskazujÄ…ce na \texttt{/etc/passwd} odpowiednio poprzez Å›cieÅ¼kÄ™ bezwzglÄ™dnÄ… i wzglÄ™dnÄ….
\end{Zadanie}

\begin{Zadanie}{}{findetc2}
Zmodyfikuj rozwiÄ…zanie zadania \ref{findetc} tak aby wyÅ›wietlaÄ‡ szczegÃ³Å‚y (w tym datÄ™ modyfikacji) dla wyszukanych plikÃ³w.
\end{Zadanie}
% END: system plikow - zadania


% BEGIN: ssh
\section{Praca zdalna}
\subsection{powÅ‚oka zdalna}
Komenda
\texttt{ssh [user@]host}
umoÅ¼liwia uzyskanie powÅ‚oki zdalnego systemu poprzez szyfrowane poÅ‚Ä…czenie, przydatne opcje:\\
	\texttt{-L portLokalny:hostZdalny:portZdalny} tworzy tunel przekierowujÄ…cy dane kierowane na portLokalny komputera na ktÃ³rym dziaÅ‚a klient ssh do portu portZdalny na serwerze hostZdalny poprzez serwer SSH (przydatne gdy hostZdalny jest osiÄ…galny z hostSSH ale nie z komputera lokalnego)\\
	\texttt{-D port} tworzy tunel dynamiczny na wskazanym porcie (moÅ¼e on byÄ‡ uÅ¼yty jako proxy typu SOCKS np. w Firefoxie w celu zapewnienia dostÄ™pu do zasobÃ³w WWW dostÄ™pnych z serwera SSH a niedostÄ™pny z komputera lokalnego)\\
	\texttt{-p port} okreÅ›la inny niÅ¼ domyÅ›lny port serwera SSH\\
	\texttt{-X} aktywuje przekazywanie komend X serwera ze strony zdalnej do klienta (pozwala na uruchomienie po stronie zdalnej aplikacji z GUI, ktÃ³re zostanie wyÅ›wietlone na lokalnym X serwerze)
% END: ssh

% BEGIN: zdalne kopiowanie
\subsection{zdalne kopiowanie}
NajprostszÄ… metÄ… kopiowania plikÃ³w pomiÄ™dzy rÃ³Å¼nymi systemami jest wykorzystanie do tego ssh, typowo robi siÄ™ to na jeden z 3 sposobÃ³w:
\begin{itemize}
	\item poleceniem
		\texttt{scp [opcje] ÅºrÃ³dÅ‚o1 [ÅºrÃ³dÅ‚o2 [...]] cel}
		, ktÃ³re
		kopiuje wskazany plik (lub pliki) do wskazanej lokalizacji, w przypadku kopiowania wielu plikÃ³w cel powinien byÄ‡ katalogiem, do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
		\texttt{-r} pozwala na (rekursywne) kopiowanie katalogÃ³w\\
		\texttt{-P port} okreÅ›la port SSH\\
		W odrÃ³Å¼nieniu od \texttt{cp} ÅºrÃ³dÅ‚o lub cel w postaci \texttt{[user@]host:[Å›cieÅ¼ka]} wskazujÄ… na zdalny system dostÄ™pny poprzez SSH.
	\item poleceniem
		\texttt{rsync [opcje] ÅºrÃ³dÅ‚o cel}
		, ktÃ³re
		kopiuje (synchronizacjiuje) pliki i drzewa katalogÃ³w (zarÃ³wno lokalnie jak i zdalnie), do waÅ¼niejszych opcji naleÅ¼y zaliczyÄ‡:\\
			\texttt{-r} pozwala na (rekursywne) kopiowanie katalogÃ³w\\
			\texttt{-l} kopiuje linki symboliczne jako linki symboliczne (zamiast kopiowania zawartoÅ›ci pliku na ktÃ³ry wskazujÄ…)\\
			\texttt{-t} zachowuje czas modyfikacji plikÃ³w\\
			\texttt{-u} kopiuje tylko gdy plik ÅºrÃ³dÅ‚owy nowszy niÅ¼ docelowy\\
			\texttt{-c} kopiuje tylko gdy plik ÅºrÃ³dÅ‚owy i docelowy majÄ… inne sumy kontrolne\\
			\texttt{--delete} usuwa z docelowego drzewa katalogÃ³w elementy nie wystÄ™pujÄ…ce w drzewie ÅºrÃ³dÅ‚owym\vspace{6pt}\\
			%
			\texttt{-e 'ssh'} pozwala na kopiowanie na/z zdalnych systemÃ³w za poÅ›rednictwem ssh, ÅºrÃ³dÅ‚o lub cel w postaci \texttt{[user@]host:[Å›cieÅ¼ka]} wskazujÄ… na zdalny system
			\texttt{--partial --partial-dir=."-tmp-"} zachowuje skopiowane czÄ™Å›ciowo pliki w katalogu .-tmp- (pozwala na przerwanie i wznowienie transferu pliku)\\
			\texttt{--progress} pokazuje postÄ™p kopiowania\\
			\texttt{--exclude="wzorzec"} pomija (w kopiowaniu i kasowaniu) pliki pasujÄ…ce do wzorzec (wzorzec moÅ¼e zawieraÄ‡ znaki uogÃ³lniajÄ…ce powÅ‚oki)
			\texttt{-n} symuluje pracÄ™ (pokazuje co zostaÅ‚oby skopiowane, ale nie kopiuje)
	\item zÅ‚oÅ¼onego polecenia opartego na przekierowaniu wyjÅ›cia jakiejÅ› komendy do ssh, ktÃ³re uruchamia po zdalnej stronie proces odbierajÄ…cy te dane na swoim standardowym wejÅ›ciu, np.:
		\begin{itemize}
			\item \Verb{tar -czf - Å›cieÅ¼ka1 [Å›cieÅ¼ka2 [...]] | ssh [user@]host 'cat > plik.tgz'}\\
				archiwizuje wskazane pliki/katalogi bezpoÅ›rednio na zdalny system z uÅ¼yciem tar i kompresji gzip do pliku \texttt{plik.tgz}
			\item \Verb{tar -cf - Å›cieÅ¼ka1 [Å›cieÅ¼ka2 [...]] | ssh [user@]host 'tar -xf - -C cel'}\\
				kopiuje wskazane pliki/katalogi na zdalny system z uÅ¼yciem tar do katalogu \texttt{cel}
		\end{itemize}
\end{itemize}
% END: zdalne kopiowanie

\setcounter{subsection}{0} % \subsection{zadania}

% BEGIN: zadania - ssh
\begin{Zadanie}{}{sshls}
Wylistuj zawartoÅ›Ä‡ /etc/ z wskazanej maszyny zdalnej.
\end{Zadanie}

\begin{Zadanie}{}{remote_copy}
Skopiuj plik /etc/hostname z wskazanej maszyny zdalnej do /tmp/hostname.
\end{Zadanie}
% END: zadania - ssh

% BEGIN: grep
\section{Operacje na plikach}
\subsection{grep i wyraÅ¼enia regularne}

Polecenie
\texttt{grep [opcje] wyraÅ¼enie [plik1 [plik2 [...]]]}
wyszukuje pasujÄ…ce do wyraÅ¼enia regularnego wyraÅ¼enie linie w plikach, przydatne opcje:\\
	\texttt{-v} zamiast pasujÄ…cych wypisz nie pasujÄ…ce\\
	\texttt{-i} ignoruj wielkoÅ›Ä‡ liter\\
	\texttt{-a} przetwarzaj pliki binarne jak tekstowe\\
	\texttt{-E} korzystaj z ,,\emph{Extended Regular Expressions}'' (ERE) zamiast ,,\emph{Basic Regular Expressions}'' (BRE)\vspace{6pt}\\
	\texttt{-P} korzystaj z ,,\emph{Perl-compatible Regular Expressions}'' (PCRE) zamiast ,,\emph{Basic Regular Expressions}'' (BRE)\vspace{6pt}\\
	%
	\texttt{-r} rekursywnie przetwarzaj podane katalogi wyszukujÄ…c w wszystkich znalezionych plikach\\
	\texttt{-R} jak -r, ale zawsze podÄ…Å¼a za linkami symbolicznymi\\
	\texttt{--exclude="wyraÅ¼enie"} pomiÅ„ pliki pasujÄ…ce do wyraÅ¼enie (moÅ¼e zawieraÄ‡ znaki uogÃ³lniajÄ…ce powÅ‚oki)\vspace{6pt}\\
	%
	\texttt{-l} wypisuje pliki z pasujÄ…cymi liniami\\
	\texttt{-L} wypisuje pliki z bez pasujÄ…cych linii

\vspace{13pt}\noindent WyraÅ¼enia regularne\footnote{
	Podana skÅ‚adnia dotyczy ,,\emph{Extended Regular Expressions}'', przy BRE niektÃ³re z znakÃ³w sterujÄ…cych wymagajÄ… zabezpieczenia odwrotnym ukoÅ›nikiem.
} konstruuje siÄ™ w oparciu o nastÄ™pujÄ…ce znaki specjalne:
\vspace{-6pt}\begin{Verbatim}
.      - dowolny znak
[a-z]  - znak z zakresu
[^a-z] - znak z poza zakresu (aby mieÄ‡ zakres z ^ naleÅ¼y daÄ‡ go nie na poczÄ…tku)
^      - poczÄ…tek napisu/linii
$      - koniec napisu/linii

*      - dowolna iloÅ›Ä‡ powtÃ³rzeÅ„
?      - 0 lub jedno powtÃ³rzenie
+      - jedno lub wiÄ™cej powtÃ³rzeÅ„
{n,m}  - od n do m powtÃ³rzeÅ„

()     - pod-wyraÅ¼enie (moÅ¼e byÄ‡ uÅ¼ywane dla powtÃ³rzeÅ„, a takÅ¼e referencji wstecznych)
\end{Verbatim}

\begin{teacherOnly}
NaleÅ¼y wspomnieÄ‡ o historii, rÃ³Å¼nych formatach wyraÅ¼eÅ„ regularnych, kompatybilnoÅ›ci wstecznej, czyli dlaczego
	\Verb#grep '^.\?$'# to to samo co \Verb#grep -E '^.?$'# i dlaczego w niektÃ³rych przypadkach stosujemy jednÄ… a w innych innÄ… notacjÄ™.

NaleÅ¼y zwrÃ³ciÄ‡ uwagÄ™ na ,,pazernoÅ›Ä‡'' dopasowaÅ„ - na ogÃ³Å‚ dopasowawany najdÅ‚uÅ¼szy moÅ¼liwy fragment:\\
\Verb{echo '<a xx="oo" />bb<a yy="ii" />' | \grep -E --color '<a.*/>'} a:\\
\Verb{echo '<a xx="oo" />bb<a yy="ii" />' | \grep -E --color '<a[^>]*/>'} vs:\\
\Verb{echo '<a xx="oo" />bb<a yy="ii" />' | \grep -P --color '<a.*?/>'}

WspomnieÄ‡ takÅ¼e o opcji -x wymagajÄ…cej dopasowania caÅ‚ej linii.
\end{teacherOnly}
% END: grep

\subsection{sed i inne narzÄ™dzia przetwarzania tekstÃ³w}
\begin{itemize}
	% BEGIN: sed
	\item \Verb{sed [opcje] [pliki]}
		edytuje plik zgodnie z podanymi poleceniami, przydatne opcje:\\
			\texttt{-e "polecenie"} - wykonuj na pliku polecenie (moÅ¼e wystÄ…piÄ‡ wielokrotnie celem podania wielu poleceÅ„)\\
			\texttt{-f "plik"} - wczytaj polecenia z pliku plik\\
			\texttt{-E} - uÅ¼ywaj rozszerzonych wyraÅ¼eÅ„ regularnych\\
			\texttt{-i} - modyfikuj podany plik zamiast wypisywaÄ‡ zmieniony na stdout\\
		przydatne polecenia:\\
			\texttt{s@regexp@napis@[g]} - wyszukaj dopasowania do wyraÅ¼enia regularnego regexp i zastÄ…p je przez napis, podanie opcji g powoduje zastÄ™powanie wszystkich wystÄ…pieÅ„ a nie tylko pierwszego, znak \texttt{@} peÅ‚ni rolÄ™ separatora i moÅ¼e zostaÄ‡ zamiast niego uÅ¼yty inny znak\\
			\texttt{y@zbiÃ³r1@zbiÃ³r2@} - zastÄ…p znaki z zbiÃ³r1 znakami odpowiadajÄ…cymi im pod wzglÄ™dem kolejnoÅ›ci znakami z zbiÃ³r2, znak \texttt{@} peÅ‚ni rolÄ™ separatora i moÅ¼e zostaÄ‡ zamiast niego uÅ¼yty inny znak\\
		moÅ¼liwe jest teÅ¼ m.in. adresowanie linii na ktÃ³rych ma byÄ‡ wykonywana operacja, np: \texttt{0,/regexp/ s@regexp@napis@} wykona polecenie s na liniach od poczÄ…tku pliku do linii pasujÄ…cej do wyraÅ¼enia regularnego regexp, czyli zastÄ…pi tylko pierwsze wystÄ…pienie w pliku
	% END: sed
	
	\vspace{6pt}
	
	% BEGIN: tail head
	\item \Verb{tail [opcje] [plik]}
		wyÅ›wietla ostatnie linie pliku, przydatne opcje:\\
			\texttt{-n x} okreÅ›la Å¼e ma zostaÄ‡ wyÅ›wietlone x ostatnich linii\\
			\texttt{-f} uruchamia dopisywania (gdy do pliku zostanÄ… dopisane nowe linie tail je wyÅ›wietli)
	\item \Verb{head [opcje] [plik]}
		wyÅ›wietla poczÄ…tkowe linie pliku, przydatne opcje:\\
			\texttt{-n x} okreÅ›la Å¼e ma zostaÄ‡ wyÅ›wietlone x pierwszych linii
	% END: tail head
	
	\vspace{6pt}
	
	% BEGIN: diff patch
	\item \Verb{diff Å›cieÅ¼ka1 Å›cieÅ¼ka2}
		porÃ³wnuje pliki lub katalogi (w przypadku tych drugich porÃ³wnuje ze sobÄ… pliki o takich samych nazwach oraz zgÅ‚asza fakt wystÄ™powania pliku tylko w jednym z katalogÃ³w), przydatne opcje:\\
			\texttt{-r} rekursywnie przetwarzaj podane katalogi\\
			\texttt{-u} wypisuje rÃ³Å¼nice w formacie "unified"\\
			\texttt{-c} wypisuje rÃ³Å¼nice w formacie "context"
	\item \Verb{patch}
	stosuje plik Å‚aty (wynik diff'a) w celu zmodyfikowania plikÃ³w, typowo:\\
		\texttt{patch -pn < plik.diff} co powoduje zastosowanie zmian opisanych w plik.diff na plikach w bieÅ¼Ä…cym katalogu,
		n okreÅ›la iloÅ›Ä‡ poziomÃ³w Å›cieÅ¼ek podanych w pliku Å‚aty ktÃ³re majÄ… zostaÄ‡ zignorowane
	% END: diff patch
	% BEGIN: sort
	\item \Verb{sort [plik]}
		sortuje linie w wskazanym pliku, przydatne opcje:\\
			\texttt{-n} traktuj liczby jako wartoÅ›ci numeryczne a nie napisy\\
			\texttt{-i} ignoruj wielkoÅ›Ä‡ liter\\
			\texttt{-r} odwrÃ³Ä‡ kolejnoÅ›Ä‡ sortowania\\
			\texttt{-k n} sortuj wg kolumny n\\
			\texttt{-t sep} kolumny rozdzielane sÄ… przy pomocy separatora sep
	% END: sort
	
	\vspace{6pt}
	
	% BEGIN: cut
	\item \Verb{cut [opcje] [pliki]}
		wybiera z pliku zadany zestaw kolumn, przydatne opcje:\\
			\texttt{-f nnn} wypierz kolumny okreÅ›lone przez nnn (np. 1,3-4,6- oznacza kolumnÄ™ 1, kolumny od 3 do 4 i od 6, a -3 oznacza 3 pierwsze kolumny)\\
			\texttt{-d sep} kolumny rozdzielane sÄ… przy pomocy separatora sep (musi byÄ‡ pojedynczym jedno bajtowym znakiem, aby ominÄ…Ä‡ to ograniczenie naleÅ¼y skorzystaÄ‡ z awk)
	% END: cut
	% BEGIN: paste join comm uniq
	\item \Verb{paste}
		Å‚Ä…czy (odpowiadajÄ…ce sobie pod wzglÄ™dem numerÃ³w) linie z dwÃ³ch plikÃ³w
	\item \Verb{join}
		Å‚Ä…czy linie  z dwÃ³ch plikÃ³w w oparciu o porÃ³wnanie wskazanego pola
	\item \Verb{comm}
		porÃ³wnuje dwa posortowane pliki pod wzglÄ™dem unikalnoÅ›ci linii (moÅ¼e wypisaÄ‡ wspÃ³lne lub wystÄ™pujÄ…ce tylko w jednym z plikÃ³w)
	\item \Verb{uniq}
		usuwa powtarzajÄ…ce siÄ™ linie z posortowanego pliku, przydatne opcje:\\
			\texttt{-c} wypisz liczbÄ™ powtÃ³rzeÅ„\\
			\texttt{-d} wypisz tylko linie z 2 lub wiÄ™cej wystÄ…pieniami\\
			\texttt{-u} wypisz tylko linie z 1 wystÄ…pieniem
	% END: paste join comm uniq
\end{itemize}

\setcounter{subsection}{0} % \subsection{zadania}

% BEGIN: zadania - unix napisy 01
\begin{Zadanie}{}{upper_false}
WyÅ›wietl plik \texttt{/etc/passwd} z zastÄ…pionym \texttt{false} przez \texttt{FALSE}.
\end{Zadanie}

\begin{Zadanie}{}{ls_nazwy}
Polecenie \Verb#ls -1d /etc/p*# wyÅ›wietla peÅ‚ne Å›cieÅ¼ki do plikÃ³w, znajdujÄ…cych siÄ™ (bezpoÅ›rednio) w \texttt{/etc/}, ktÃ³rych nazwa zaczyna siÄ™ literÄ… \texttt{p}.
Przekieruj standardowe wyjÅ›cie tej komendy do takiego ciÄ…gu poleceÅ„ aby uzyskaÄ‡ tylko nazwy tych plikÃ³w (bez Å›cieÅ¼ki).
\end{Zadanie}

\begin{Zadanie}{}{wyszukaj_napis}
Napisz polecenie ktÃ³re wyszuka wszystkie wystÄ…pienia napisu \Verb{nameserver} w plikach znajdujÄ…cych siÄ™ w katalogu \Verb{/etc} (wraz z jego podkatalogami).
\end{Zadanie}
% END: zadania - unix napisy 01

% BEGIN: zadania - unix napisy 02
\begin{Zadanie}{}{wyszukaj_napis2}
Zmodyfikuj rozwiÄ…zanie zadania \ref{wyszukaj_napis} tak aby wyÅ‚Ä…cznie wypisywaÅ‚o nazwy plikÃ³w (mogÄ… byÄ‡ ze Å›cieÅ¼kÄ…) zawierajÄ…cych wyszukiwany napis.
\end{Zadanie}

\begin{Zadanie}{}{lsetc2}
WyÅ›wietliÄ‡ same nazwy (bez Å›cieÅ¼ki) wszystkich plikÃ³w i katalogÃ³w znajdujÄ…cych siÄ™ bezpoÅ›rednio w \texttt{/etc/} ktÃ³rych druga litera to \texttt{a} natomiast trzecia to \texttt{p} lub \texttt{s}.
Przedstaw rozwiÄ…zanie z uÅ¼yciem i bez uÅ¼ycia komendy \texttt{cd}.
\end{Zadanie}
% END: zadania - unix napisy 02


% BEGIN: UÅ¼ytkownicy, uprawnienia i procesy
\section{UÅ¼ytkownicy, uprawnienia i procesy}

%Systemy ,,unixowe'' tworzone byÅ‚y jako wielo-uÅ¼ytkownikowe i wielo-procesowe, w wyniku tego posiadajÄ… 

\subsection{Uprawnienia do plikÃ³w}
Podstawowe unixowe uprawnienia do plikÃ³w skÅ‚adajÄ… siÄ™ z trzech czÅ‚onÃ³w: uprawnienia dla wÅ‚aÅ›ciciela (u), grupy (g) i pozostaÅ‚ych uÅ¼ytkownikÃ³w (o).
W kaÅ¼dym z czÅ‚onÃ³w mogÄ… byÄ‡ przyznane uprawnienia do czytania (r), pisania (w) i wykonywania (x); w odniesieniu do plikÃ³w jest to intuicyjne (uprawnienie do wykonywania jest potrzebne do uruchomienia programÃ³w), natomiast w stosunku do katalogÃ³w wyglÄ…da to nastÄ™pujÄ…co: uprawnienia do czytania pozwalajÄ… na listowanie zawartoÅ›ci, do wykonania pozwalajÄ… na dostÄ™p, do zawartoÅ›ci katalogu (wejÅ›cia do niego) do pisania na tworzenie nowych obiektÃ³w wewnÄ…trz niego i zmienianie nazw istniejÄ…cych.

Rozszerzeniem podstawowych uprawnieÅ„ opisanych powyÅ¼ej jest mechanizm Filesystem Access Control List (ACL, fACL).\\
Jest on opcjonalnym mechanizmem ktÃ³ry (na wspierajÄ…cych go systemach plikÃ³w) pozwala na definiowanie indywidualnych uprawnieÅ„ do pliku dla poszczegÃ³lnych uÅ¼ytkownikÃ³w i grup â€“ plik ma nadal swojego wÅ‚aÅ›ciciela, grupÄ™ i wszystkich pozostaÅ‚ych, ale przed prawami dla "others" wchodzÄ… prawa uÅ¼ytkownikÃ³w i grup definiowanych w ACL. Wypadkowe prawa obliczane sÄ… jako suma wynikÅ‚a z praw uÅ¼ytkownika i grup do ktÃ³rych naleÅ¼y.\\
ACL pozwala ponadto definiowaÄ‡ uprawnienia domyÅ›lne dla nowo powstaÅ‚ych plikÃ³w w katalogu (sÄ… one opcjÄ… katalogu).

Wszystkie poniÅ¼sze komendy przyjmujÄ… opcjÄ™ \texttt{-R} powodujÄ…cÄ… rekursywne wykonywanie zmian na drzewku katalogÃ³w/plikÃ³w rozpoczynajÄ…cym siÄ™ w podanej Å›cieÅ¼ce.
\begin{itemize}
	\item \Verb{chown [opcje] wÅ‚aÅ›ciciel Å›cieÅ¼ka}
		zmiana wÅ‚aÅ›ciciela pliku
	\item \Verb{chgrp [opcje] grupa Å›cieÅ¼ka}
		zmiana grupy do ktÃ³rej naleÅ¼y plik pliku
	\item \Verb{chmod [opcje] uprawnienia Å›cieÅ¼ka}
		zmiana prawa dostÄ™pu do pliku(Ã³w)
	
	\item \Verb{getfacl [opcje] [Å›cieÅ¼ka]}
		odczyt uprawnieÅ„ zwiÄ…zanych z listami kontroli dostÄ™pu fACL
	\item \Verb{setfacl [opcje] [Å›cieÅ¼ka]}
		ustawianie uprawnieÅ„ zwiÄ…zanych z listami kontroli dostÄ™pu fACL
\end{itemize}

\noindent{\Symbola ğŸ¤”} Dodatkowo naleÅ¼y wspomnieÄ‡ teÅ¼ o poleceniach takich jak:
\begin{itemize}
	\item \Verb{lsattr} / \Verb{chattr}
		wyÅ›wietla / modyfikuje atrybuty plikÃ³w zwiÄ…zanych z systemem plikÃ³w (np. zabrania jakiejkolwiek modyfikacji pliku)
	\item \Verb{getcap} / \Verb{setcap}
		wyÅ›wietla / modyfikuje atrybuty plikÃ³w zwiÄ…zanych z wÅ‚aÅ›ciwoÅ›ciami jÄ…dra (zasadniczo zwiÄ™kszonymi uprawnieniami programÃ³w je posiadajÄ…cych, ale bardziej ograniczonymi niÅ¼ wykonanie na prawach root przez SUID)
\end{itemize}

\subsection{UÅ¼ytkownicy}
\begin{itemize}
	\item \Verb{id [uÅ¼ytkownik]}
		informacja o uÅ¼ytkowniku (m.in. grupy do ktÃ³rych naleÅ¼y)
	\item \Verb{whoami}
		informacja o aktualnym uÅ¼ytkowniku
	\item \Verb{w lub who}
		informacja o zalogowanych uÅ¼ytkownikach
	
	\item \Verb{passwd [uÅ¼ytkownik]}
		zmiana hasÅ‚a
		
	\item \Verb{su [uÅ¼ytkownik]}
		przeÅ‚Ä…cza uÅ¼ytkownika (aby przeÅ‚Ä…czony uÅ¼ytkownik miaÅ‚ dostÄ™p do "naszego" x serwera wczeÅ›niej wydajemy \texttt{xhost LOCAL:uÅ¼ytkownik})
	\item \Verb{sudo}
		program pozwalajÄ…cy na wykonywanie uprzywilejowanych komend przez wyznaczonych uÅ¼ytkownikÃ³w
\end{itemize}

\subsection{Procesy i zasoby}
\begin{itemize}
	\item \Verb{ps [opcje]}
		wyÅ›wietla aktualnie dziaÅ‚ajÄ…ce procesy i informacje o nich\\
			np. kombinacja opcji \texttt{-Alf} powoduje wyÅ›wietlenie wszystkich procesÃ³w, w dÅ‚ugim, peÅ‚nym formacie wypisywania
		
	\item \Verb{top}
		monitorowanie procesÃ³w obciÄ…Å¼ajÄ…cych CPU, pamiÄ™Ä‡, itd
	\item \Verb{iotop}
		monitorowanie procesÃ³w obciÄ…Å¼ajÄ…cych I/O
	
	\item \Verb{kill [opcje] pid}
		przesyÅ‚a sygnaÅ‚ do procesÃ³w o podanych PID
	\item \Verb{killall [opcje] nazwa}
		przesyÅ‚a sygnaÅ‚ do procesÃ³w o pasujÄ…cej nazwie
\end{itemize}

\begin{ProTip}{kill i zabijanie procesu}
Polecenie kill domyÅ›lnie wysyÅ‚a sygnaÅ‚ SIGTERM, ktÃ³ry jest proÅ›bÄ… o zakoÅ„czenie procesu (proces moÅ¼e jÄ… uszanowaÄ‡ lub nie, np. zignorowaÄ‡). WiÄ™c sam kill nie zabija procesu.

Wiele sygnaÅ‚Ã³w moÅ¼e zostaÄ‡ przechwyconych i obsÅ‚uÅ¼onych (zignorowanych) przez proces do ktÃ³rego sÄ… adresowane. IstniejÄ… takÅ¼e sygnaÅ‚y, ktÃ³re nie mogÄ… zostaÄ‡ obsÅ‚uÅ¼one bÄ…dÅº zignorowane sÄ… to m.in.:
	SIGKILL (zakoÅ„czenie procesu bez dania mu jakiejkolwiek szansy zrobienia czegoÅ› na â€do widzeniaâ€, wysyÅ‚any przez \Verb#kill -9#),
	SIGSTOP (wstrzymanie procesu).
\end{ProTip}

\begin{ProTip}{Ctrl+C / Ctrl+Z / Ctrl+D}
\textbf{Ctrl+C} wysyÅ‚a sygnaÅ‚ SIGINT do procesu zajmujÄ…cego terminal na ktÃ³rym zostaÅ‚ on wprowadzony. SygnaÅ‚ ten jest proÅ›bÄ… o zakoÅ„czenie procesu, ktÃ³rÄ… proces moÅ¼e uszanowaÄ‡ lub nie (np. moÅ¼e caÅ‚kiem zignorowaÄ‡ lub poprosiÄ‡ o potwierdzenie). Jest on podobny do SIGTERM, jednak jest innym sygnaÅ‚em i moÅ¼e byÄ‡ inaczej obsÅ‚uÅ¼ony (np. w SIGTERM nie ma wiÄ™kszego sensu pytaÄ‡ o potwierdzenie).

\vspace{6pt}\textbf{Ctrl+Z} wysyÅ‚a sygnaÅ‚ SIGTSTP do procesu zajmujÄ…cego terminal na ktÃ³rym zostaÅ‚ on wprowadzony. SygnaÅ‚ ten jest proÅ›bÄ… o wstrzymanie procesu i oddanie terminala, proÅ›ba ta moÅ¼e byÄ‡ zignorowana przez proces. Proces przerwany w ten sposÃ³b moÅ¼e byÄ‡ wznowiony poleceniem \Verb#fg# (ktÃ³re wznowi go jako pierwszoplanowy â€“ okupujÄ…cy terminal) lub \Verb#bg# (ktÃ³re wznowi go jako jako proces w tle â€“ oddajÄ…c terminal, przodkowi ktÃ³ry go posiadaÅ‚ wczeÅ›niej).

\vspace{6pt}\textbf{Ctrl+D} nie wysyÅ‚a Å¼adnego sygnaÅ‚u, dziaÅ‚a tylko gdy proces czyta dane z terminala (podÅ‚Ä…czonego zazwyczaj do jego standardowego wejÅ›cia). WysyÅ‚a on do terminala znak EOT (End-of-Transmission), w efekcie czego:
\begin{itemize}
	\item (jeÅ¼eli bufor wejÅ›ciowy jest niepusty) terminal wypycha bufor wejÅ›ciowy do programu (tak jak po wprowadzeniu nowej linii), albo
	\item (jeÅ¼eli nie ma znakÃ³w w buforze) terminal zamyka strumieÅ„ wprowadzanych danych do programu
\end{itemize}
Program nie otrzymuje w strumieniu znaku EOT (jest on przechwycony przez terminal).
ZamkniÄ™cie strumienia wejÅ›ciowego na ogÃ³Å‚ prowadzi takÅ¼e do zakoÅ„czenia dziaÅ‚ania programu, jednak (w odrÃ³Å¼nieniu od Ctrl-C) pozwala programowi na normalne przetworzenie wprowadzonych danych.
\end{ProTip}

\begin{ProTip}{Ctrl+S / Ctrl+Q}
\textbf{Ctrl+S} wstrzymuje przewijanie (odÅ›wieÅ¼anie) terminala, aby wznowiÄ‡ naleÅ¼y uÅ¼yÄ‡ \textbf{Ctrl+Q}.
\end{ProTip}
% END: UÅ¼ytkownicy, uprawnienia i procesy

% BEGIN: Planowanie zadaÅ„
\subsection{Planowanie zadaÅ„}
Typowo system zapewnia usÅ‚ugÄ™ uruchamiania zadaÅ„ o zadanym czasie. Z usÅ‚ugi tej moÅ¼na skorzystaÄ‡ przy pomocy poleceÅ„:
\begin{itemize}
	\item \Verb{crontab} pozwala oglÄ…daÄ‡ i edytowaÄ‡ tablice zaplanowanych zadaÅ„ cyklicznych (dla cron'a)
	\item \Verb{at} pozwala jednorazowo zaplanowaÄ‡ zadanie
\end{itemize}
	Pliki konfiguracyjne crona / obsÅ‚ugiwane crontab-em majÄ… postaÄ‡: \texttt{minuty godzina  dzienMiesiaca miesiac dzienTygodnia polecenie}.
	Wpis oznacza Å¼e polecenie ma zostaÄ‡ wykonane jeÅ¼eli wszystkie warunki bÄ™dÄ… speÅ‚nione, jeÅ¼eli jakiÅ› warunek nie jest nam potrzebny moÅ¼na uÅ¼yÄ‡ gwiazdki \texttt{*},
	z kolei \texttt{*/n} oznacza wykonywanie jeÅ¼eli dana wartoÅ›Ä‡ jest podzielna przez n. Np.:
		\texttt{*/20 3  * * 1 ls} oznacza wykonanie komendy ls w kaÅ¼dy poniedziaÅ‚ek o godzinie 3:00 3:20 i 3:40
	
	Standardowe wyjÅ›cie, wyjÅ›cie bÅ‚Ä™du oraz powiadomienie o niezerowym kodzie powrotu domyÅ›lnie sÄ… wysyÅ‚ane na lokalny adres mailowy uÅ¼ytkownika bÄ™dÄ…cego wÅ‚aÅ›cicielem danego contaba.
	Niekiedy dostÄ™pny jest takÅ¼e \texttt{anacron} pozwalajÄ…cy na mniej precyzyjne planowanie zadaÅ„.
% END: Planowanie zadaÅ„

% BEGIN: System operacyjny - intro
\section{System operacyjny}
\begin{teacherOnly}
\begin{easylist}[itemize]
	& \textbf{proces startu}
		&& "co komputer zaczyna robiÄ‡ po wÅ‚Ä…czeniu?"
		&& zasysanie instrukcji przez procesor
		&& zaÅ‚adowanie i uruchomienie bootloadera
		&& zaÅ‚adowanie i uruchomienie jÄ…dra
		&& opcja init
	& funkcje systemu operacyjnego
		&& procesy
			&&& co to jest proces
			&&& wÄ…tki (wÄ…tek vs proces)
			&&& \textbf{szeregowanie zadaÅ„}
			&&& drzewo procesÃ³w (rodzice)
			&&& ew. algorytmy szeregowania
			&&& fork()
			&&& sygnaÅ‚y
				&&&& kill
				&&&& czy proces moÅ¼e nie umrzeÄ‡? ... pokazaÄ‡: wynik ps, wskazaÄ‡ pid bash'a, zrobiÄ‡ kill bash
				&&&& wiele rÃ³Å¼nych sygnaÅ‚Ã³w ... Ctr+C ... Ctrl+Z ... info o zakoÅ„czeniu potomka ...
		&& obsÅ‚uga plikÃ³w
			&&& wszystko jest plikiem
			&&& select(), czyli czekanie na dane ...
		&& \textbf{obsÅ‚uga dostÄ™pu do pamiÄ™ci}
			&&& pokazaÄ‡ rysujÄ…c na tablicy stronnicowanie
			&&& pamiÄ™Ä‡ wspÃ³Å‚dzielona
				&&&& problem  if a==1: a=0
				&&&& semafory
		&& obsÅ‚uga dostÄ™pu do urzÄ…dzeÅ„
			&&& interfejsy sieciowe, itd
		&& standardowe usÅ‚ugi
			&&& cron
			&&& mail
\end{easylist}
\end{teacherOnly}

System operacyjny jest programem uruchamianym po starcie komputera (co prawda nie jako pierwszym, ale zastÄ™pujÄ…cym / usuwajÄ…cym z pamiÄ™ci uruchomione wczeÅ›niej, wiÄ™c najstarszym z dziaÅ‚ajÄ…cych).
% END: System operacyjny - intro

% BEGIN: Proces uruchamiania komputera
\subsection{Proces startu}

Po otrzymaniu sygnaÅ‚u resetu (takÅ¼e przy uruchamianiu systemu - "Power-on Reset") procesor po inicjalizacji rejestrÃ³w zaczyna wykonywanie kodu znajdujÄ…cego siÄ™ pod jakimÅ› ustalonym adresem (typowo w wbudowanej lub zewnÄ™trznej pamiÄ™ci typu ROM lub Flash). W zaleÅ¼noÅ›ci od danej architektury / procesrora moÅ¼e to byÄ‡ m.in.: bezpoÅ›rednio kod programu uÅ¼ytkownika, wbudowany bootloader danego procesora umoÅ¼liwiajÄ…cy dalsze Å‚adowanie np. z karty SD, zewnÄ™trzny niskopoziomowy bootloader (np. u-boot).

W przypadku architektur zgodnych z x86 jest to BIOS, ktÃ³ry po zakoÅ„czeniu procesu inicjalizacji sprzÄ™tu i testÃ³w rozruchowych Å‚aduje do pamiÄ™ci kod znajdujÄ…cy siÄ™ w pierwszym sektorze dysku twardego (sektorze rozruchowym rozpoczynajÄ…cym siÄ™ od adresu zerowego) i uruchamia go (przekazuje do niego kontrolÄ™). Znajduje siÄ™ tam kod (lub tylko poczÄ…tek kodu) programu rozruchowego, ktÃ³rego zadaniem jest zaÅ‚adowanie systemu operacyjnego. W przypadku wspÃ³Å‚czesnych systemÃ³w linuxowych jest to zazwyczaj GRUB.

Start systemu rozpoczyna siÄ™ od zaÅ‚adowania do pamiÄ™ci obrazu jÄ…dra wraz z parametrami oraz (opcjonalnie) initrd i przekazania kontroli do jÄ…dra przez program rozruchowy (np. GRUB). W przypadku jÄ…dra linuxowego i korzystania z initrd obraz ten przeksztaÅ‚cany jest na RAM-dysk w trybie zapisu-odczytu i montowany jako rootfs z ktÃ³rego uruchamiany jest \Verb#/sbin/init# (ktÃ³rego podstawowym zadaniem jest zamontowanie wÅ‚aÅ›ciwego rootfs). Po jego zakoÅ„czeniu (lub od razu gdy nie uÅ¼ywamy initrd) uruchamiany jest program wskazany w opcji \Verb#init=# jÄ…dra (domyÅ›lnie typowo \Verb#/sbin/init#) z rootfs wskazanego w opcji \Verb#root=# jÄ…dra. W opcji \Verb#init=# moÅ¼na wskazaÄ‡ dowolny program lub skrypt (uruchomiony zostanie z prawami root'a).
% END: Proces uruchamiania komputera

% BEGIN: Co robi system operacyjny
\subsection{Rola systemu operacyjnego}

System operacyjny jest oprogramowaniem odpowiedzialnym za zarzÄ…dzanie zasobami systemu komputerowego (sprzÄ™tem, ale nie tylko) oraz uruchomionymi na nim aplikacjami. Do najistotniejszych zadaÅ„ systemu operacyjnego zalicza siÄ™ podziaÅ‚ czasu procesora i szeregowanie zadaÅ„ oraz zarzÄ…dzanie pamiÄ™ciÄ… - w szczegÃ³lnoÅ›ci obsÅ‚uga pamiÄ™ci wirtualnej, najczÄ™Å›ciej z wykorzystaniem mechanizmu stronicowania.

OprÃ³cz tego system zajmuje siÄ™ takÅ¼e zarzÄ…dzaniem plikami, wejÅ›ciem/wyjÅ›ciem (najczÄ™Å›ciej jest ono realizowane w oparciu o przerwania (IRQ), ale znane sÄ… takÅ¼e modele programowego we/wy polegajÄ…cego na aktywnym czekaniu), obsÅ‚ugÄ… urzÄ…dzeÅ„ (wejÅ›cie/wyjÅ›cie, sterowniki, dostÄ™p), obsÅ‚ugÄ… sieci (stos protokoÅ‚Ã³w sieciowych), itd.

WspÃ³Å‚czesne systemy korzystajÄ… z co najmniej dwÃ³ch poziomÃ³w pracy - uprzywilejowanego poziomu "nadzorcy" w ktÃ³rym dziaÅ‚a jÄ…dro systemu operacyjnego oraz trybu uÅ¼ytkownika. Operacje I/O muszÄ… odbywaÄ‡ siÄ™ w trybie uprzywilejowanym. RÃ³wnieÅ¼ pamiÄ™Ä‡ posiada obszar chroniony, w ktÃ³rym umieszczany jest m.in. tablica wektorÃ³w przerwaÅ„ (inaczej zmiana adresu w tym wektorze mogÅ‚aby doprowadziÄ‡ do przejÄ™cia systemu w trybie uprzywilejowanym).
% END: Co robi system operacyjny

% BEGIN: ZarzÄ…dzanie procesami
\subsubsection{ZarzÄ…dzanie procesami}

Jednym z gÅ‚Ã³wnych zadaÅ„ systemu operacyjnego jest zarzÄ…dzanie procesami na nim uruchomionymi - obejmuje to zarÃ³wno czynnoÅ›ci zwiÄ…zane z ich tworzeniem oraz koÅ„czeniem, jak teÅ¼ szeregowanie zadaÅ„. To system operacyjny przejmuje okresowo procesor (z uÅ¼yciem przerwania zegarowego), aby podjÄ…Ä‡ decyzjÄ™ (w oparciu o jakiÅ› algorytm szeregowania zadaÅ„) ktÃ³ry/ktÃ³re z porcesÃ³w gotowych do dziaÅ‚ania (czyli takich, ktÃ³re aktualnie nie oczekujÄ… na "coÅ›") ma dostaÄ‡ przydziaÅ‚ czasu porcesora.
% END: ZarzÄ…dzanie procesami

% BEGIN: ZarzÄ…dzanie pamiÄ™ciÄ…
\subsubsection{ZarzÄ…dzanie pamiÄ™ciÄ…}

DrugÄ… podstawowÄ… funkcjÄ… systemu operacyjnego, wspomnianÄ… na poczÄ…tku, jest zarzÄ…dzanie pamiÄ™ciÄ…. ZarzÄ…dzanie pamiÄ™ciÄ… polega na odpowiednim mapowaniu adresÃ³w logicznych (uÅ¼ywanych przez procesy) na adresy fizyczne (uÅ¼ywane przez procesor), korzysta ono z wsparcia sprzÄ™towego ze strony procesora.

Jest to najczÄ™Å›ciej realizowane w oparciu o wspomniany mechanizm stronicowania. Polega to na podziale pamiÄ™ci dostÄ™pnej pamiÄ™ci fizycznej na jednakowe bloki zwane ramkami oraz podziale pamiÄ™ci logicznej na jednakowe bloki (o tej caÅ‚ej wielkoÅ›ci co ramki) zwane stronami. Strony ktÃ³re sÄ… wykorzystywane przez program sÄ… mapowane na dowolne ramki pamiÄ™ci fizycznej (w przypadku gdy dana strona nie zamapowana - w zaleÅ¼noÅ›ci od okolicznoÅ›ci bÅ‚Ä…d braku strony lub bÅ‚Ä…d ochrony strony).

RozwiÄ…zuje to problem fragmentacji zewnÄ™trznej, polegajÄ…cej na braku spÃ³jnego obszaru pamiÄ™ci o Å¼Ä…danej dÅ‚ugoÅ›ci pomimo iÅ¼ Å‚Ä…czna iloÅ›Ä‡ wolnej pamiÄ™ci jest dostateczna, jednak nie rozwiÄ…zuje problemu fragmentacji wewnÄ™trznej, polegajÄ…cej na przydzielaniu zbyt duÅ¼ych fragmentÃ³w pamiÄ™ci dla procesu (a wrÄ™cz moÅ¼na powiedzieÄ‡ Å¼e go pogÅ‚Ä™bia).

Mechanizm ten wymaga trzymania tablicy wolnych ramek, tablicy stron dla kaÅ¼dego procesu (zawierajÄ…cej przypisania mapowaÅ„ stron danego procesu na ramki) oraz wykonywania tÅ‚umaczenia adresÃ³w logicznych (strona + przesuniÄ™cie na stronie). TakÅ¼e sama tablica stron procesu procesu moÅ¼e byÄ‡ stronicowania (mamy tablicÄ™ ktÃ³ra informuje nas Å¼e przypisania stron w danym zakresie adresÃ³w sÄ… przechowywane w jakiejÅ› ramce).

Strony i ramki mogÄ… byÄ‡ wspÃ³Å‚dzielone pomiÄ™dzy procesami (np. przy rozgaÅ‚Ä™zianiu procesu strony sÄ… kopiowane dopiero gdy zajdzie taka potrzeba). W przypadku braku miejsca w pamiÄ™ci fizycznej wybrane strony nieaktywnego aktualnie procesu mogÄ… byÄ‡ umieszczane na dysku (swap).
% END: ZarzÄ…dzanie pamiÄ™ciÄ…

\section{Literatura dodatkowa}
 WiÄ™cej informacji o podstawach dziaÅ‚ania w systematach ,,unixowych'' oraz peÅ‚niejsza lista poleceÅ„ zamieszczona zostaÅ‚a pod adresem \url{http://vip.opcode.eu.org/#Systemy_unix-owate}.

\rozwiazania

\copyrightFooter{
	Â© Matematyka dla Ciekawych Åšwiata, 2017-2020.\\
	Â© Robert Ryszard Paciorek <rrp@opcode.eu.org>, 2003-2020.\\
	Kopiowanie, modyfikowanie i redystrybucja dozwolone pod warunkiem zachowania informacji o autorach.
}
\end{document}
